{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///vigor.js","webpack:///webpack/bootstrap 0d65a2d727e5449986b3","webpack:///./src/bootstrap.js","webpack:///./src/common/EventBus.js","webpack:///external {\"root\":\"_\",\"commonjs2\":\"lodash\",\"commonjs\":\"lodash\",\"amd\":\"lodash\"}","webpack:///external {\"root\":\"Backbone\",\"commonjs2\":\"backbone\",\"commonjs\":\"backbone\",\"amd\":\"backbone\"}","webpack:///./src/common/EventKeys.js","webpack:///./src/common/SubscriptionKeys.js","webpack:///./src/component/ComponentBase.js","webpack:///./src/component/ComponentView.js","webpack:///./src/component/ComponentViewModel.js","webpack:///./src/datacommunication/ProducerManager.js","webpack:///./src/datacommunication/ProducerMapper.js","webpack:///./src/datacommunication/Subscription.js","webpack:///./src/utils/validateContract.js","webpack:///./src/settings.js","webpack:///./src/datacommunication/apiservices/APIService.js","webpack:///./src/datacommunication/producers/IdProducer.js","webpack:///./src/datacommunication/producers/Producer.js","webpack:///./src/datacommunication/repositories/Repository.js","webpack:///./src/datacommunication/repositories/ServiceRepository.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_3__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","ServiceRepository","Repository","Producer","IdProducer","APIService","validateContract","setup","settings","Subscription","ProducerMapper","ProducerManager","ComponentViewModel","ComponentView","ComponentBase","SubscriptionKeys","EventKeys","EventBus","undefined","_EventBus","_EventBus2","_EventKeys","_EventKeys2","_SubscriptionKeys","_SubscriptionKeys2","_ComponentBase","_ComponentBase2","_ComponentView","_ComponentView2","_ComponentViewModel","_ComponentViewModel2","_ProducerManager","_ProducerManager2","_ProducerMapper","_ProducerMapper2","_Subscription","_Subscription2","_validateContract","_validateContract2","_settings","_APIService","_APIService2","_IdProducer","_IdProducer2","_Producer","_Producer2","_Repository","_Repository2","_ServiceRepository","_ServiceRepository2","Vigor","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_underscore","_underscore2","_backbone","_backbone2","EventRegistry","extend","callback","_eventKeyExists","eventRegistry","on","once","off","message","trigger","keys","property","hasOwnProperty","push","indexOf","ALL_EVENTS","object","get","Model","Events","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_get","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","_View","options","_this","_checkIfImplemented","viewModel","apply","arguments","renderStaticContent","addSubscriptions","model","unbind","removeSubscriptions","stopListening","$el","remove","methodNames","_this2","result","methodName","item","Error","name","View","_validateContract3","uniqueId","unsubscribeAll","subscribe","unsubscribe","contract","incommingData","registerProducers","producers","forEach","producer","register","producerForKey","subscriptionKey","componentId","subscriptionOptions","subscription","addComponent","removeComponent","getInstance","producersByKey","NO_PRODUCERS_ERROR","NO_PRODUCER_FOUND_ERROR","KEY_ALREADY_REGISTERED","producerClassForKey","producerClass","PRODUCTION_KEY","reset","_typeof","Symbol","iterator","dataToCompare","comparatorId","verb","shouldValidateContract","isArray","isObject","contractKeyCount","dataKeyCount","val","newSettings","ServiceChannel","_window","service","subscribers","pollingInterval","lastPollTime","timeout","params","getParams","restart","wait","hasLastPollTime","getPollingInterval","elapsedWait","Date","now","Math","max","setupNextFetch","clearTimeout","removeChannel","setTimeout","fetch","cullImmediateRequests","subscriber","includes","onSubscriptionsChanged","without","stop","didParamsChange","isEqual","oldParams","shouldFetchImmediately","shouldFetchOnParamsUpdate","pollingIntervals","map","min","Infinity","compact","consolidateParams","immediateRequests","filter","each","immediateRequest","removeSubscription","window","channels","sync","method","url","parse","resp","paramsArray","JSON","stringify","channel","addGetSubscription","post","postParams","put","putParams","delete","deleteParams","channelName","channelForParams","addSubscription","channelId","responseData","getModelInstance","success","onFetchSuccess","error","onFetchError","save","onPostSuccess","onPostError","onPutSuccess","onPutError","destroy","onDeleteSuccess","onDeleteError","_Producer3","updatedIds","subscriptions","_idType","set","type","idForOptions","isIdOfValidType","idType","produceDataSync","repository","diff","addRemoveMap","idForModel","hasId","bind","changeMap","shouldPropagateModelChange","addedModelIds","added","removedModelIds","removed","updatedModelIds","changed","ids","flattenDepth","produceDataForIds","allIds","uniq","concat","produceData","parseInt","produce","slice","index","splice","_this3","data","currentData","decorate","registeredComponents","component","onDiffInRepository","throttle","_isSubscribedToRepositories","_productionKey","productionKey","_repositories","repositories","_decorators","decorators","existingSubscription","subscribeToRepositories","shouldUnsubscribe","unsubscribeFromRepositories","subscribeToRepository","unsubscribeFromRepository","listenTo","REPOSITORY_DIFF","decorator","toJSON","models","modelToJSON","dataToProduce","_PRODUCTION_KEY","mixin","_Collection","_ref","_len","args","Array","_key","_onAdd","_onChange","_onRemove","_triggerUpdates","cid","_throttledAddedModels","_throttledChangedModels","_throttledRemovedModels","_throttledTriggerUpdates","leading","addThrottledListeners","_onAll","event","REPOSITORY_ADD","values","_throttledEvent","REPOSITORY_CHANGE","REPOSITORY_REMOVE","eventRef","difference","consolidated","_throttledDiff","_throttledAdd","_throttledChange","_throttledRemove","Collection","_Repository3","services","addSubscriptionToService","removeSubscriptionFromService","_services"],"mappings":"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","file":"vigor.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"backbone\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"backbone\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Vigor\"] = factory(require(\"lodash\"), require(\"backbone\"));\n\telse\n\t\troot[\"Vigor\"] = factory(root[\"_\"], root[\"Backbone\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","/*!\n * vigorjs - A small framework for structuring large scale Backbone applications\n * @version 0.1.3\n * @link https://github.com/kambisports/VigorJS.git\n * @license ISC\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"backbone\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"backbone\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Vigor\"] = factory(require(\"lodash\"), require(\"backbone\"));\n\telse\n\t\troot[\"Vigor\"] = factory(root[\"_\"], root[\"Backbone\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.ServiceRepository = exports.Repository = exports.Producer = exports.IdProducer = exports.APIService = exports.validateContract = exports.setup = exports.settings = exports.Subscription = exports.ProducerMapper = exports.ProducerManager = exports.ComponentViewModel = exports.ComponentView = exports.ComponentBase = exports.SubscriptionKeys = exports.EventKeys = exports.EventBus = undefined;\n\t\n\tvar _EventBus = __webpack_require__(1);\n\t\n\tvar _EventBus2 = _interopRequireDefault(_EventBus);\n\t\n\tvar _EventKeys = __webpack_require__(4);\n\t\n\tvar _EventKeys2 = _interopRequireDefault(_EventKeys);\n\t\n\tvar _SubscriptionKeys = __webpack_require__(5);\n\t\n\tvar _SubscriptionKeys2 = _interopRequireDefault(_SubscriptionKeys);\n\t\n\tvar _ComponentBase = __webpack_require__(6);\n\t\n\tvar _ComponentBase2 = _interopRequireDefault(_ComponentBase);\n\t\n\tvar _ComponentView = __webpack_require__(7);\n\t\n\tvar _ComponentView2 = _interopRequireDefault(_ComponentView);\n\t\n\tvar _ComponentViewModel = __webpack_require__(8);\n\t\n\tvar _ComponentViewModel2 = _interopRequireDefault(_ComponentViewModel);\n\t\n\tvar _ProducerManager = __webpack_require__(9);\n\t\n\tvar _ProducerManager2 = _interopRequireDefault(_ProducerManager);\n\t\n\tvar _ProducerMapper = __webpack_require__(10);\n\t\n\tvar _ProducerMapper2 = _interopRequireDefault(_ProducerMapper);\n\t\n\tvar _Subscription = __webpack_require__(11);\n\t\n\tvar _Subscription2 = _interopRequireDefault(_Subscription);\n\t\n\tvar _validateContract = __webpack_require__(12);\n\t\n\tvar _validateContract2 = _interopRequireDefault(_validateContract);\n\t\n\tvar _settings = __webpack_require__(13);\n\t\n\tvar _APIService = __webpack_require__(14);\n\t\n\tvar _APIService2 = _interopRequireDefault(_APIService);\n\t\n\tvar _IdProducer = __webpack_require__(15);\n\t\n\tvar _IdProducer2 = _interopRequireDefault(_IdProducer);\n\t\n\tvar _Producer = __webpack_require__(16);\n\t\n\tvar _Producer2 = _interopRequireDefault(_Producer);\n\t\n\tvar _Repository = __webpack_require__(17);\n\t\n\tvar _Repository2 = _interopRequireDefault(_Repository);\n\t\n\tvar _ServiceRepository = __webpack_require__(18);\n\t\n\tvar _ServiceRepository2 = _interopRequireDefault(_ServiceRepository);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Vigor = {\n\t  EventBus: _EventBus2.default,\n\t  EventKeys: _EventKeys2.default,\n\t  SubscriptionKeys: _SubscriptionKeys2.default,\n\t  ComponentBase: _ComponentBase2.default,\n\t  ComponentView: _ComponentView2.default,\n\t  ComponentViewModel: _ComponentViewModel2.default,\n\t  ProducerManager: _ProducerManager2.default,\n\t  ProducerMapper: _ProducerMapper2.default,\n\t  Subscription: _Subscription2.default,\n\t  settings: _settings.settings,\n\t  setup: _settings.setup,\n\t  validateContract: _validateContract2.default,\n\t  APIService: _APIService2.default,\n\t  IdProducer: _IdProducer2.default,\n\t  Producer: _Producer2.default,\n\t  Repository: _Repository2.default,\n\t  ServiceRepository: _ServiceRepository2.default\n\t};\n\t\n\texports.default = Vigor;\n\t\n\t// In the long run this should be the only export needed, default\n\t// default above is\n\t\n\texports.EventBus = _EventBus2.default;\n\texports.EventKeys = _EventKeys2.default;\n\texports.SubscriptionKeys = _SubscriptionKeys2.default;\n\texports.ComponentBase = _ComponentBase2.default;\n\texports.ComponentView = _ComponentView2.default;\n\texports.ComponentViewModel = _ComponentViewModel2.default;\n\texports.ProducerManager = _ProducerManager2.default;\n\texports.ProducerMapper = _ProducerMapper2.default;\n\texports.Subscription = _Subscription2.default;\n\texports.settings = _settings.settings;\n\texports.setup = _settings.setup;\n\texports.validateContract = _validateContract2.default;\n\texports.APIService = _APIService2.default;\n\texports.IdProducer = _IdProducer2.default;\n\texports.Producer = _Producer2.default;\n\texports.Repository = _Repository2.default;\n\texports.ServiceRepository = _ServiceRepository2.default;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _underscore = __webpack_require__(2);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tvar _backbone = __webpack_require__(3);\n\t\n\tvar _backbone2 = _interopRequireDefault(_backbone);\n\t\n\tvar _EventKeys = __webpack_require__(4);\n\t\n\tvar _EventKeys2 = _interopRequireDefault(_EventKeys);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar EventRegistry = function EventRegistry() {\n\t  _classCallCheck(this, EventRegistry);\n\t};\n\t\n\t_underscore2.default.extend(EventRegistry.prototype, _backbone2.default);\n\t\n\t// A global EventBus for the entire application\n\t//\n\t// @example How to subscribe to events\n\t//   EventBus.subscribe EventKeys.EXAMPLE_EVENT_KEY, (event) ->\n\t//      # do something with `event` here...\n\t//\n\t\n\tvar EventBus = function () {\n\t  function EventBus() {\n\t    _classCallCheck(this, EventBus);\n\t  }\n\t\n\t  _createClass(EventBus, [{\n\t    key: 'subscribe',\n\t\n\t\n\t    // Bind a `callback` function to an event key. Passing `all` as key will\n\t    // bind the callback to all events fired.\n\t    //\n\t    // @param [String] the event key to subscribe to. See datacommunication/EventKeys for available keys.\n\t    // @param [function] the callback that receives the event when it is sent\n\t    value: function subscribe(key, callback) {\n\t      if (!this._eventKeyExists(key)) {\n\t        throw 'key \\'' + key + '\\' does not exist in EventKeys';\n\t      }\n\t\n\t      if ('function' !== typeof callback) {\n\t        throw 'callback is not a function';\n\t      }\n\t\n\t      return this.eventRegistry.on(key, callback);\n\t    }\n\t\n\t    // Bind a callback to only be triggered a single time.\n\t    // After the first time the callback is invoked, it will be removed.\n\t    //\n\t    // @param [String] the event key to subscribe to. See datacommunication/EventKeys for available keys.\n\t    // @param [function] the callback that receives the single event when it is sent\n\t\n\t  }, {\n\t    key: 'subscribeOnce',\n\t    value: function subscribeOnce(key, callback) {\n\t      if (!this._eventKeyExists(key)) {\n\t        throw 'key \\'' + key + '\\' does not exist in EventKeys';\n\t      }\n\t\n\t      if ('function' !== typeof callback) {\n\t        throw 'callback is not a function';\n\t      }\n\t\n\t      return this.eventRegistry.once(key, callback);\n\t    }\n\t\n\t    // Remove a callback.\n\t    //\n\t    // @param [String] the event key to unsubscribe from.\n\t    // @param [Function] the callback that is to be unsubscribed\n\t\n\t  }, {\n\t    key: 'unsubscribe',\n\t    value: function unsubscribe(key, callback) {\n\t      if (!this._eventKeyExists(key)) {\n\t        throw 'key \\'' + key + '\\' does not exist in EventKeys';\n\t      }\n\t\n\t      if ('function' !== typeof callback) {\n\t        throw 'callback is not a function';\n\t      }\n\t\n\t      return this.eventRegistry.off(key, callback);\n\t    }\n\t\n\t    // Send an event message  to all bound callbacks. Callbacks are passed the\n\t    // message argument, (unless you're listening on `all`, which will\n\t    // cause your callback to receive the true name of the event as the first\n\t    // argument).\n\t    //\n\t    // @param [String] the event key to send the message on.\n\t    // @param [Object] the message to send\n\t\n\t  }, {\n\t    key: 'send',\n\t    value: function send(key, message) {\n\t      if (!this._eventKeyExists(key)) {\n\t        throw 'key \\'' + key + '\\' does not exist in EventKeys';\n\t      }\n\t\n\t      return this.eventRegistry.trigger(key, message);\n\t    }\n\t  }, {\n\t    key: '_eventKeyExists',\n\t    value: function _eventKeyExists(key) {\n\t      var keys = [];\n\t      for (var property in _EventKeys2.default) {\n\t        if (_EventKeys2.default.hasOwnProperty(property)) {\n\t          var value = _EventKeys2.default[property];\n\t          keys.push(value);\n\t        }\n\t      }\n\t      return keys.indexOf(key) >= 0;\n\t    }\n\t  }]);\n\t\n\t  return EventBus;\n\t}();\n\t\n\tEventBus.prototype.eventRegistry = new EventRegistry();\n\t\n\texports.default = new EventBus();\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _underscore = __webpack_require__(2);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar EventKeys = {\n\t  ALL_EVENTS: 'all',\n\t  extend: function extend(object) {\n\t    _underscore2.default.extend(EventKeys, object);\n\t    return EventKeys;\n\t  }\n\t};\n\t\n\texports.default = EventKeys;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _underscore = __webpack_require__(2);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar SubscriptionKeys = {\n\t  extend: function extend(object) {\n\t    _underscore2.default.extend(SubscriptionKeys, object);\n\t    return SubscriptionKeys;\n\t  }\n\t};\n\t\n\texports.default = SubscriptionKeys;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _underscore = __webpack_require__(2);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tvar _backbone = __webpack_require__(3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t// ##ComponentBase\n\t// This class is intended to be the public interface for a component.\n\t//\n\t// By default it exposes a render and a dispose method which should be overridden\n\t//\n\t// To create a component you would typically do a index file which extends ComponentBase\n\t// and then instantiate any views, models, collections etc. that the component need\n\t// within the index file.\n\t\n\tvar ComponentBase = function () {\n\t  function ComponentBase() {\n\t    _classCallCheck(this, ComponentBase);\n\t  }\n\t\n\t  _createClass(ComponentBase, [{\n\t    key: 'render',\n\t\n\t    // **render:** <br/>\n\t    // Override this method\n\t    value: function render() {\n\t      throw 'ComponentBase->render needs to be over-ridden';\n\t    }\n\t\n\t    // **dispose:** <br/>\n\t    // Override this method\n\t\n\t  }, {\n\t    key: 'dispose',\n\t    value: function dispose() {\n\t      throw 'ComponentBase->dispose needs to be over-ridden';\n\t    }\n\t  }], [{\n\t    key: 'extend',\n\t\n\t    // ComponentBase.extend = Backbone.Model.extend;\n\t    // Add Vigor.extend (Backbone.Model.extend) <br/>\n\t    // [Backbone.Model.extend](http://backbonejs.org/#Model-extend)\n\t    get: function get() {\n\t      return _backbone.Model.extend;\n\t    }\n\t  }]);\n\t\n\t  return ComponentBase;\n\t}();\n\t\n\t// Extends Backbone.Events <br/>\n\t// [Backbone.Events](http://backbonejs.org/#Events)\n\t\n\t\n\t_underscore2.default.extend(ComponentBase.prototype, _backbone.Events);\n\t\n\texports.default = ComponentBase;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _backbone = __webpack_require__(3);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t// ##ComponentView\n\t// This class is intended to be used as a base class for all views within a component\n\t// It enforces five methods to unify the structure of ComponentViews accross a large application:\n\t//\n\t// - renderStaticContent\n\t// - renderDynamicContent\n\t// - addSubscriptions\n\t// - removeSubscriptions\n\t// - dispose\n\t//\n\t\n\tvar ComponentView = function (_View) {\n\t  _inherits(ComponentView, _View);\n\t\n\t  // **constructor** <br/>\n\t  function ComponentView(options) {\n\t    _classCallCheck(this, ComponentView);\n\t\n\t    // These methods are required to make our view code\n\t    // structure more consistent (just make them empty if\n\t    // you don't need them).\n\t    var _this = _possibleConstructorReturn(this, (ComponentView.__proto__ || Object.getPrototypeOf(ComponentView)).call(this, options));\n\t\n\t    _this._checkIfImplemented(['renderStaticContent', 'renderDynamicContent', 'addSubscriptions', 'removeSubscriptions', 'dispose']);\n\t\n\t    return _this;\n\t  }\n\t\n\t  // **initialize** <br/>\n\t  // @param object <br/>\n\t  // @return this: Object <br/>\n\t  // view options, usually containing a viewModel instance <br/>\n\t\n\t\n\t  _createClass(ComponentView, [{\n\t    key: 'initialize',\n\t    value: function initialize(options) {\n\t      if (options && options.viewModel) {\n\t        this.viewModel = options.viewModel;\n\t      }\n\t      _get(ComponentView.prototype.__proto__ || Object.getPrototypeOf(ComponentView.prototype), 'initialize', this).apply(this, arguments);\n\t      return this;\n\t    }\n\t\n\t    // **render** <br/>\n\t    // @return this: Object <br/>\n\t    // the views render method, it will call @renderStaticContent and @addSubscriptions <br/>\n\t\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      this.renderStaticContent();\n\t      this.addSubscriptions();\n\t      return this;\n\t    }\n\t\n\t    // **renderStaticContent** <br/>\n\t    // @return this: Object <br/>\n\t    // Override this. <br/>\n\t    // Render parts of component that don't rely on model. <br/>\n\t\n\t  }, {\n\t    key: 'renderStaticContent',\n\t    value: function renderStaticContent() {\n\t      return this;\n\t    }\n\t\n\t    // **renderDynamicContent** <br/>\n\t    // @return this: Object <br/>\n\t    // Override this. <br/>\n\t    // Render parts of component that relies on model. <br/>\n\t\n\t  }, {\n\t    key: 'renderDynamicContent',\n\t    value: function renderDynamicContent() {\n\t      return this;\n\t    }\n\t\n\t    // **addSubscriptions** <br/>\n\t    // @return this: Object <br/>\n\t    // Override this. <br/>\n\t    // Add view model subscriptions if needed. <br/>\n\t\n\t  }, {\n\t    key: 'addSubscriptions',\n\t    value: function addSubscriptions() {\n\t      return this;\n\t    }\n\t\n\t    // **removeSubscriptions** <br/>\n\t    // @return this: Object <br/>\n\t    // Override this. <br/>\n\t    // Remove view model subscriptions.\n\t\n\t  }, {\n\t    key: 'removeSubscriptions',\n\t    value: function removeSubscriptions() {\n\t      return this;\n\t    }\n\t\n\t    // **dispose** <br/>\n\t    // Removes events and dom elements related to the view <br/>\n\t    // Override this, and call super.\n\t\n\t  }, {\n\t    key: 'dispose',\n\t    value: function dispose() {\n\t      if (this.model) {\n\t        this.model.unbind();\n\t      }\n\t      this.removeSubscriptions();\n\t      this.stopListening();\n\t      this.$el.off();\n\t      this.$el.remove();\n\t      return this.off();\n\t    }\n\t\n\t    // **_checkIfImplemented** <br/>\n\t    // @param array: Array <br/>\n\t    // Ensures that passed methods are implemented in the view\n\t\n\t  }, {\n\t    key: '_checkIfImplemented',\n\t    value: function _checkIfImplemented(methodNames) {\n\t      var _this2 = this;\n\t\n\t      return function () {\n\t        var result = [];\n\t        for (var i = 0; i < methodNames.length; i++) {\n\t          var methodName = methodNames[i];\n\t          var item = void 0;\n\t          if (!_this2.constructor.prototype.hasOwnProperty(methodName)) {\n\t            throw new Error(_this2.constructor.name + ' - ' + methodName + '() must be implemented in View.');\n\t          }\n\t          result.push(item);\n\t        }\n\t        return result;\n\t      }();\n\t    }\n\t  }]);\n\t\n\t  return ComponentView;\n\t}(_backbone.View);\n\t\n\texports.default = ComponentView;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _underscore = __webpack_require__(2);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tvar _backbone = __webpack_require__(3);\n\t\n\tvar _ProducerManager = __webpack_require__(9);\n\t\n\tvar _ProducerManager2 = _interopRequireDefault(_ProducerManager);\n\t\n\tvar _validateContract2 = __webpack_require__(12);\n\t\n\tvar _validateContract3 = _interopRequireDefault(_validateContract2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t// ##ComponentViewModel\n\t// This class is intended to be the base class for all view models in a component\n\t//\n\t// A ComponentViewModel handles communication with producers through the\n\t// ProducerManager\n\tvar ComponentViewModel = function () {\n\t  _createClass(ComponentViewModel, null, [{\n\t    key: 'extend',\n\t    get: function get() {\n\t      return _backbone.Model.extend;\n\t    }\n\t    // **constructor** <br/>\n\t    // The constructor generates a unique id for the ViewModel that will be used to\n\t    // handle subscriptions in the ProducerManager\n\t\n\t  }]);\n\t\n\t  function ComponentViewModel() {\n\t    _classCallCheck(this, ComponentViewModel);\n\t\n\t    this.id = 'ComponentViewModel_' + _underscore2.default.uniqueId();\n\t  }\n\t\n\t  // **dispose** <br/>\n\t  // Remves all subscriptions\n\t\n\t\n\t  _createClass(ComponentViewModel, [{\n\t    key: 'dispose',\n\t    value: function dispose() {\n\t      return this.unsubscribeAll();\n\t    }\n\t\n\t    // **subscribe** <br/>\n\t    // @param [key]: Object <br/>\n\t    // A Vigor.SubscriptionKey containing a key and contract property<br/>\n\t    // @param [callback]: Function <br/>\n\t    // Callback function that takes care of produced data\n\t    // @param [options]: Object (optional)<br/>\n\t    // Pass any optional data that might be needed by a Producer\n\t    //\n\t    // Adds a subscription on a specific SubscriptionKey to the ProducerManager.\n\t    // Whenever new data is produced the callback will be called with new data as param\n\t\n\t  }, {\n\t    key: 'subscribe',\n\t    value: function subscribe(key, callback, options) {\n\t      return _ProducerManager2.default.subscribe(this.id, key, callback, options);\n\t    }\n\t\n\t    // **unsubscribe** <br/>\n\t    // @param [key]: Object <br/>\n\t    // A Vigor.SubscriptionKey containing a key and contract property<br/>\n\t    //\n\t    // Removes a subscription on specific key\n\t\n\t  }, {\n\t    key: 'unsubscribe',\n\t    value: function unsubscribe(key) {\n\t      return _ProducerManager2.default.unsubscribe(this.id, key);\n\t    }\n\t\n\t    // **unsubscribeAll** <br/>\n\t    // Removes all subscriptions\n\t\n\t  }, {\n\t    key: 'unsubscribeAll',\n\t    value: function unsubscribeAll() {\n\t      return _ProducerManager2.default.unsubscribeAll(this.id);\n\t    }\n\t\n\t    // **validateContract** <br/>\n\t    // @param [contract]: Object <br/>\n\t    // The contract specified in the SubscriptionKey used when subscribing for data\n\t    // @param [incommingData]: Object <br/>\n\t    // data supplied through the subscription\n\t    //\n\t    // Compares contract with incomming data and checks values, types, and number\n\t    // of properties, call this method manually from your callback if you want to\n\t    // validate incoming data\n\t\n\t  }, {\n\t    key: 'validateContract',\n\t    value: function validateContract(contract, incommingData) {\n\t      return (0, _validateContract3.default)(contract, incommingData, this.id);\n\t    }\n\t  }]);\n\t\n\t  return ComponentViewModel;\n\t}();\n\t\n\texports.default = ComponentViewModel;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _ProducerMapper = __webpack_require__(10);\n\t\n\tvar _ProducerMapper2 = _interopRequireDefault(_ProducerMapper);\n\t\n\tvar _Subscription = __webpack_require__(11);\n\t\n\tvar _Subscription2 = _interopRequireDefault(_Subscription);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t//  ## ProducerManager\n\t// The ProducerManager utilizies the [ProducerMapper](ProducerMapper.html) to (un)register components on subscriptions.\n\t//\n\tvar ProducerManager = {\n\t\n\t  // **registerProducers:** </br>\n\t  // @param [producers]: Array <br/>\n\t  //\n\t  // Registers a one or more producers in mapper\n\t  registerProducers: function registerProducers(producers) {\n\t    producers.forEach(function (producer) {\n\t      return _ProducerMapper2.default.register(producer);\n\t    });\n\t  },\n\t\n\t\n\t  // **producerForKey:** </br>\n\t  // @param [subscriptionKey]: String <br/>\n\t  // @returns [producer]: Producer </br>\n\t  //\n\t  // Retrieves a registered producer for the given subscription\n\t  producerForKey: function producerForKey(subscriptionKey) {\n\t    return _ProducerMapper2.default.producerForKey(subscriptionKey);\n\t  },\n\t\n\t\n\t  // **subscribe:** </br>\n\t  // @param [componentId]: String <br/>\n\t  // @param [subscriptionKey]: Object <br/>\n\t  // @param [callback]: Function <br/>\n\t  // @param [subscriptionOptions]: Object (default empty object) <br/>\n\t  //\n\t  // Registers a component with [componentId] to recieve data changes on given [subscriptionKey] through the component [callback]\n\t  subscribe: function subscribe(componentId, subscriptionKey, callback) {\n\t    var subscriptionOptions = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\t\n\t    var subscription = new _Subscription2.default(componentId, callback, subscriptionOptions);\n\t    var producer = this.producerForKey(subscriptionKey);\n\t    producer.addComponent(subscription);\n\t  },\n\t\n\t\n\t  // **unsubscribe:** </br>\n\t  // @param [componentId]: String <br/>\n\t  // @param [subscriptionKey]: String <br/>\n\t  //\n\t  // Unsubscribes a component with [componentId] from the producer for the given [subscriptionKey]\n\t  unsubscribe: function unsubscribe(componentId, subscriptionKey) {\n\t    var producer = this.producerForKey(subscriptionKey);\n\t    producer.removeComponent(componentId);\n\t  },\n\t\n\t\n\t  // **unsubscribeAll:** </br>\n\t  // @param [componentId]: String <br/>\n\t  //\n\t  // Unsubscribes a component with [componentId] from any producer that might have it in its subscription\n\t  unsubscribeAll: function unsubscribeAll(componentId) {\n\t    _ProducerMapper2.default.producers.forEach(function (producer) {\n\t      return producer.prototype.getInstance().removeComponent(componentId);\n\t    });\n\t  }\n\t};\n\t\n\texports.default = ProducerManager;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t// Array of currently registered producers\n\tvar producers = [];\n\t\n\t// Table look-up of subscription key to mapped producer\n\tvar producersByKey = {};\n\t\n\t// Error thrown when no producers at all have been registered and component starts a subscription\n\tvar NO_PRODUCERS_ERROR = \"There are no producers registered - register producers through the ProducerManager\";\n\t\n\t// Error thrown when a component tries to register a subscription and no producer has been registered for that subscription\n\tvar NO_PRODUCER_FOUND_ERROR = function NO_PRODUCER_FOUND_ERROR(key) {\n\t  return \"No producer found for subscription \" + key + \"!\";\n\t};\n\t\n\t// Error thrown when a component tries to register a subscription to a producer has already been registered for that subscription\n\tvar KEY_ALREADY_REGISTERED = function KEY_ALREADY_REGISTERED(key) {\n\t  return \"A producer for the key \" + key + \" is already registered\";\n\t};\n\t\n\t// ##ProducerMapper\n\t// Mapper class to keep track of the available producers and their corresponding subscriptions\n\tvar ProducerMapper = {\n\t\n\t  producers: producers,\n\t  // **producerClassForKey:** </br>\n\t  // @param [subscriptionKey]: String <br/>\n\t  // @returns [producerClass]: Class </br>\n\t  // @throws [NO_PRODUCERS_ERROR], [NO_PRODUCER_FOUND_ERROR] </br>\n\t  //\n\t  // Returns the corresponding producer class for the given [subscriptionKey]\n\t  producerClassForKey: function producerClassForKey(subscriptionKey) {\n\t    var key = subscriptionKey.key;\n\t\n\t    if (producers.length === 0) {\n\t      throw NO_PRODUCERS_ERROR;\n\t    }\n\t\n\t    var producerClass = producersByKey[key];\n\t\n\t    if (!producerClass) {\n\t      throw NO_PRODUCER_FOUND_ERROR(key);\n\t    }\n\t\n\t    return producerClass;\n\t  },\n\t\n\t\n\t  // **producerForKey:** </br>\n\t  // @param [subscriptionKey]: String <br/>\n\t  // @returns [producerClass]: Producer </br>\n\t  //\n\t  // Returns the instance of the producer mapper to the [subscriptionKey]\n\t  producerForKey: function producerForKey(subscriptionKey) {\n\t    var producerClass = this.producerClassForKey(subscriptionKey);\n\t    return producerClass.prototype.getInstance();\n\t  },\n\t\n\t\n\t  // **register:** </br>\n\t  // @param [producerClass]: Class <br/>\n\t  // @throws [KEY_ALREADY_REGISTERED] </br>\n\t  //\n\t  // Registers a new producer type [producerClass] in the mapper\n\t  register: function register(producerClass) {\n\t    if (producers.indexOf(producerClass) === -1) {\n\t      producers.push(producerClass);\n\t      var subscriptionKey = producerClass.prototype.PRODUCTION_KEY;\n\t      var key = subscriptionKey.key;\n\t\n\t\n\t      if (producersByKey[key]) {\n\t        throw KEY_ALREADY_REGISTERED(key);\n\t      }\n\t\n\t      return producersByKey[key] = producerClass;\n\t    }\n\t  },\n\t\n\t\n\t  // **reset:** </br>\n\t  //\n\t  // Used in unit tests to reset the mapper\n\t  reset: function reset() {\n\t    producers.length = 0;\n\t    return producersByKey = {};\n\t  }\n\t};\n\t\n\texports.default = ProducerMapper;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Subscription = function Subscription(id, callback, options) {\n\t  _classCallCheck(this, Subscription);\n\t\n\t  this.id = id;\n\t  this.callback = callback;\n\t  this.options = options;\n\t};\n\t\n\texports.default = Subscription;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _underscore = __webpack_require__(2);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tvar _settings = __webpack_require__(13);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// **ValidateContract**<br/>\n\t// @param [contract]: Object<br/>\n\t// The contract to validate the data against. The contract should match the shape of the expected data object and\n\t// contain primitive values of the same type as the expected values.\n\t//\n\t// @param [dataToCompare]: Object<br/>\n\t// The data to validate.\n\t//\n\t// @param [comparatorId]: String<br/>\n\t// A human-readable name for the comparator, to be used to make nice error messages when things go wrong.\n\t//\n\t// @param [verb]: String<br/>\n\t// A human-readable name for the action that the comparator is trying to achieve, to be used to make nice error\n\t// messages when things go wrong. The default value is `receiving`.\n\t//\n\t// @returns `true` if the data is valid according to the given contract, `false` otherwise.\n\t//\n\t// Validates the given data according to the given contract. If the shape or any of the primitive types of the data\n\t// object differ from the contract object, the contract is violated and this function returns `false`. Otherwise, it\n\t// returns `true`.\n\tvar validateContract = function validateContract(contract, dataToCompare, comparatorId) {\n\t  var verb = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'recieving';\n\t\n\t  if (!_settings.settings.shouldValidateContract) {\n\t    return;\n\t  }\n\t  if (!contract) {\n\t    throw new Error('The ' + comparatorId + ' does not have any contract specified');\n\t  }\n\t\n\t  if (!dataToCompare) {\n\t    throw new Error(comparatorId + ' is trying to validate the contract but does not recieve any data to compare against the contract');\n\t  }\n\t\n\t  if (_underscore2.default.isArray(contract) && _underscore2.default.isArray(dataToCompare) === false) {\n\t    throw new Error(comparatorId + '\\'s compared data is supposed to be an array but is a ' + (typeof dataToCompare === 'undefined' ? 'undefined' : _typeof(dataToCompare)));\n\t  }\n\t\n\t  if (_underscore2.default.isObject(contract) && _underscore2.default.isArray(contract) === false && _underscore2.default.isArray(dataToCompare)) {\n\t    throw new Error(comparatorId + '\\'s compared data is supposed to be an object but is an array');\n\t  }\n\t\n\t  if (_underscore2.default.isObject(contract) && _underscore2.default.isArray(contract) === false) {\n\t    var contractKeyCount = _underscore2.default.keys(contract).length;\n\t    var dataKeyCount = _underscore2.default.keys(dataToCompare).length;\n\t\n\t    if (dataKeyCount > contractKeyCount) {\n\t      throw new Error(comparatorId + ' is ' + verb + ' more data then what is specified in the contract', contract, dataToCompare);\n\t    } else if (dataKeyCount < contractKeyCount) {\n\t      throw new Error(comparatorId + ' is ' + verb + ' less data then what is specified in the contract', contract, dataToCompare);\n\t    }\n\t  }\n\t\n\t  for (var key in contract) {\n\t    if (contract.hasOwnProperty(key)) {\n\t      var val = contract[key];\n\t      if (!(key in dataToCompare)) {\n\t        throw new Error(comparatorId + ' has data but is missing the key: ' + key);\n\t      }\n\t\n\t      if (val !== null || val !== undefined) {\n\t        if (_typeof(dataToCompare[key]) !== (typeof val === 'undefined' ? 'undefined' : _typeof(val))) {\n\t          throw new Error(comparatorId + ' is ' + verb + ' data of the wrong type according to the contract, ' + key + ', expects ' + (typeof val === 'undefined' ? 'undefined' : _typeof(val)) + ' but gets ' + _typeof(dataToCompare[key]));\n\t        }\n\t      }\n\t    }\n\t  }\n\t\n\t  return true;\n\t};\n\t\n\texports.default = validateContract;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.setup = exports.settings = undefined;\n\t\n\tvar _underscore = __webpack_require__(2);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar settings = {\n\t  shouldValidateContract: false\n\t};\n\t\n\tfunction setup(newSettings) {\n\t  _underscore2.default.extend(settings, newSettings);\n\t}\n\t\n\texports.settings = settings;\n\texports.setup = setup;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _underscore = __webpack_require__(2);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tvar _backbone = __webpack_require__(3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t// ## ServiceChannel\n\t// The ServiceChannel class is private to the APIService class. Service channels are used to group subscriptions to an\n\t// API service into sets of subscriptions whose requirements can be fulfilled with a single request, thus reducing\n\t// network usage.<br/>\n\t// Each subscription to the channel may have a polling interval, and the channel will ask the service that created\n\t// it to perform a fetch when the polling intervals elapse.<br/>\n\t// Service channels are not used for post requests, which are always started immediately, idependent of other requests,\n\t// and cannot be polled.\n\tvar ServiceChannel = function () {\n\t\n\t  // If subscribers are provided, the requests will start immediately.\n\t  function ServiceChannel(_window, name, service, subscribers) {\n\t    _classCallCheck(this, ServiceChannel);\n\t\n\t    this._window = _window;\n\t    this.service = service;\n\t\n\t    // The name of this channel; used by the API service to uniquely identify it.\n\t    this.name = name;\n\t\n\t    // An array of subscription objects, each of which may contain a pollingInterval in ms, and a params object\n\t    this.subscribers = subscribers;\n\t\n\t    // The minimum polling interval of the subscribers, or 0\n\t    this.pollingInterval = undefined;\n\t\n\t    // The unix timestamp of the last poll\n\t    this.lastPollTime = undefined;\n\t\n\t    // A timeout id, as returned by window.setTimeout, for the next poll.\n\t    this.timeout = undefined;\n\t\n\t    this.params = this.getParams();\n\t\n\t    this.restart();\n\t  }\n\t\n\t  // **restart**<br/>\n\t  // Restarts the channel, causing it to schedule the next request.<br/>\n\t  // This method can be called at any time, since it takes into account the time since the last request.\n\t\n\t\n\t  _createClass(ServiceChannel, [{\n\t    key: 'restart',\n\t    value: function restart() {\n\t      var wait = void 0;\n\t      var hasLastPollTime = !(typeof this.lastPollTime === 'undefined' || this.lastPollTime === null);\n\t      this.pollingInterval = this.getPollingInterval();\n\t\n\t      if (hasLastPollTime) {\n\t        var elapsedWait = this._window.Date.now() - this.lastPollTime;\n\t        wait = Math.max(this.pollingInterval - elapsedWait, 0);\n\t      } else {\n\t        wait = 0;\n\t      }\n\t      this.setupNextFetch(wait);\n\t    }\n\t\n\t    // **stop**<br/>\n\t    // Stops the channel and asks the service to remove it.\n\t\n\t  }, {\n\t    key: 'stop',\n\t    value: function stop() {\n\t      this._window.clearTimeout(this.timeout);\n\t      this.timeout = undefined;\n\t      this.subscribers = undefined;\n\t      this.params = undefined;\n\t      this.service.removeChannel(this);\n\t    }\n\t\n\t    // **setupNextFetch**<br/>\n\t    // @param [wait]: Number<br/>\n\t    // The amount of time to wait until the fetch. Defaults to the current polling interval.\n\t    //\n\t    // Schedules the next fetch to start the given number of ms in the future.\n\t\n\t  }, {\n\t    key: 'setupNextFetch',\n\t    value: function setupNextFetch() {\n\t      var _this = this;\n\t\n\t      var wait = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.pollingInterval;\n\t\n\t      this._window.clearTimeout(this.timeout);\n\t\n\t      this.timeout = this._window.setTimeout(function () {\n\t        _this.lastPollTime = _this._window.Date.now();\n\t        _this.service.fetch(_this.params);\n\t        // Remove requests with a zero polling interval since the request has now been made\n\t        _this.cullImmediateRequests();\n\t\n\t        // Check to make sure we still have subscribers after culling\n\t        // immediate requests\n\t        if (_this.subscribers) {\n\t          // if we still have subscribers, set up the next fetch\n\t          if (_this.pollingInterval > 0) {\n\t            _this.setupNextFetch();\n\t          } else {\n\t            _this.timeout = undefined;\n\t          }\n\t        }\n\t      }, wait);\n\t    }\n\t\n\t    // **addSubscription**<br/>\n\t    // @param [subscriber]: Object<br/>\n\t    // The subscription to add. May contain a pollingInterval in ms, and a params object.\n\t    //\n\t    // Add a subscription to the channel, causing the params to update. A fetch may be scheduled or rescheduled.\n\t\n\t  }, {\n\t    key: 'addSubscription',\n\t    value: function addSubscription(subscriber) {\n\t      if (!_underscore2.default.includes(this.subscribers, subscriber)) {\n\t        this.subscribers.push(subscriber);\n\t\n\t        this.onSubscriptionsChanged();\n\t      }\n\t    }\n\t\n\t    // **removeSubscription**<br/>\n\t    // @param [subscriber]: Object<br/>\n\t    // The subscription to remove. This must be the same reference as the object used when subscribing (i.e. ===).\n\t    //\n\t    // Remove a subscription to the channel, causing the params to update. The next fetch may be rescheduled or the\n\t    // channel may be stopped if this is the last subscriber.\n\t\n\t  }, {\n\t    key: 'removeSubscription',\n\t    value: function removeSubscription(subscriber) {\n\t      if (_underscore2.default.includes(this.subscribers, subscriber)) {\n\t        this.subscribers = _underscore2.default.without(this.subscribers, subscriber);\n\t\n\t        if (this.subscribers.length === 0) {\n\t          this.stop();\n\t        } else {\n\t          this.onSubscriptionsChanged();\n\t        }\n\t      }\n\t    }\n\t\n\t    // **onSubscriptionsChanged**<br/>\n\t    // Updates the params and reschedules the next fetch if necessary.\n\t\n\t  }, {\n\t    key: 'onSubscriptionsChanged',\n\t    value: function onSubscriptionsChanged() {\n\t      var params = this.getParams();\n\t      var didParamsChange = !_underscore2.default.isEqual(params, this.params);\n\t\n\t      var oldParams = this.params;\n\t      this.params = params;\n\t\n\t      var shouldFetchImmediately = false;\n\t\n\t      if (didParamsChange) {\n\t        shouldFetchImmediately = this.service.shouldFetchOnParamsUpdate(this.params, oldParams, this.name);\n\t      }\n\t\n\t      if (shouldFetchImmediately) {\n\t        this.lastPollTime = undefined;\n\t        this.restart();\n\t      } else if (this.getPollingInterval() !== this.pollingInterval) {\n\t        this.restart();\n\t      }\n\t    }\n\t\n\t    // **getPollingInterval**<br/>\n\t    // @returns [pollingInterval]: Number<br/>\n\t    // The current polling interval in ms.\n\t    //\n\t    // Returns the lowest polling interval of subscribers. If no subscriber has a polling interval,\n\t    // returns 0 which represents an immediate request.\n\t\n\t  }, {\n\t    key: 'getPollingInterval',\n\t    value: function getPollingInterval() {\n\t      var pollingIntervals = _underscore2.default.map(this.subscribers, function (subscriber) {\n\t        return subscriber.pollingInterval;\n\t      });\n\t      var pollingInterval = _underscore2.default.min(pollingIntervals);\n\t      if (pollingInterval === Infinity) {\n\t        return 0;\n\t      } else {\n\t        return pollingInterval;\n\t      }\n\t    }\n\t\n\t    // **getParams**<br/>\n\t    // @returns [params]: Object<br/>\n\t    // The current consolidated params for this channel.\n\t    //\n\t    // A channel always holds an up-to-date copy of the consilidated params.\n\t    // This method updates those params, and is called whenever a subscriber is\n\t    // added or removed.\n\t\n\t  }, {\n\t    key: 'getParams',\n\t    value: function getParams() {\n\t      var params = _underscore2.default.map(this.subscribers, function (subscriber) {\n\t        return subscriber.params;\n\t      });\n\t      params = _underscore2.default.compact(params);\n\t      return this.service.consolidateParams(params, this.name);\n\t    }\n\t\n\t    // **cullImmediateRequests**<br/>\n\t    // Removes all subscribers that do not have a polling interval.\n\t\n\t  }, {\n\t    key: 'cullImmediateRequests',\n\t    value: function cullImmediateRequests() {\n\t      var _this2 = this;\n\t\n\t      var immediateRequests = _underscore2.default.filter(this.subscribers, function (subscriber) {\n\t        return subscriber.pollingInterval === undefined || subscriber.pollingInterval === 0;\n\t      });\n\t\n\t      // Remove the immediate requests. This will never trigger a\n\t      // restart because the polling interval is zero and cannot be lowered\n\t      _underscore2.default.each(immediateRequests, function (immediateRequest) {\n\t        return _this2.removeSubscription(immediateRequest);\n\t      });\n\t\n\t      this.pollingInterval = this.getPollingInterval();\n\t    }\n\t  }]);\n\t\n\t  return ServiceChannel;\n\t}();\n\t\n\t// ## APIService\n\t// An API service makes XHRs when it is subscribed to.\n\t\n\t\n\tvar APIService = function () {\n\t  _createClass(APIService, null, [{\n\t    key: 'extend',\n\t    get: function get() {\n\t      return _backbone.Model.extend;\n\t    }\n\t\n\t    // Optionally pass in a window object to stub Date, set/clearTimeout for testing\n\t\n\t  }]);\n\t\n\t  function APIService() {\n\t    var _window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window;\n\t\n\t    _classCallCheck(this, APIService);\n\t\n\t    var service = this;\n\t    // An object referencing the channels owned by this service by name\n\t    this.channels = {};\n\t    this._window = _window;\n\t\n\t    this.Model = _backbone.Model.extend({\n\t      sync: function sync(method, model, options) {\n\t        return service.sync(method, model, options);\n\t      },\n\t      url: function url() {\n\t        return service.url(this);\n\t      },\n\t      parse: function parse(resp, options) {\n\t        return service.parse(resp, options, this);\n\t      }\n\t    });\n\t  }\n\t\n\t  // **consolidateParams**<br/>\n\t  // @param [paramsArray]: Array&lt;Object&gt;<br/>\n\t  // An array of all of the params of all of the subscribers on a channel\n\t  //\n\t  // @param [channelName]: String<br/>\n\t  // The name of the channel\n\t  //\n\t  // @returns [params]: Object\n\t  // The consolidated params that should be used for the request\n\t  //\n\t  // Converts an array of params for the subscribers on this channel into\n\t  // a single params object. The default implementation just returns the first\n\t  // params object in the array. This is fine when using the default implementation of\n\t  // channelForParams because all the params are identical anyway.\n\t\n\t\n\t  _createClass(APIService, [{\n\t    key: 'consolidateParams',\n\t    value: function consolidateParams(paramsArray) {\n\t      return paramsArray[0];\n\t    }\n\t\n\t    // **channelForParams**<br/>\n\t    // @param [params]: Object<br/>\n\t    // The params to be added to a channel\n\t    //\n\t    // @returns [channelName]: String<br/>\n\t    // The name of the channel to add the params to\n\t    //\n\t    // Returns the name of the channel that should request data for the given params.\n\t    // By default, only subscribers with identical params are put on the same channel\n\t\n\t  }, {\n\t    key: 'channelForParams',\n\t    value: function channelForParams(params) {\n\t      // `null`/`undefined` should be equivalent to an empty params object\n\t      return JSON.stringify(params) || \"{}\";\n\t    }\n\t\n\t    // **shouldFetchOnParamsUpdate**<br/>\n\t    // @param [newParams]: Object<br/>\n\t    // The new consolidated params object\n\t    //\n\t    // @param [oldParams]: Object<br/>\n\t    // The old consolidated params object\n\t    //\n\t    // @param [channelName]: String<br/>\n\t    // The name of the channel that the params are for.\n\t    //\n\t    // This method is called by the service channel when its consolidated params change.\n\t    // Return true if the service should fetch immediately after the given params update, or\n\t    // false if the service should wait until the next scheduled poll time.<br/>\n\t    // The default implementation always returns true, forcing an immediate fetch.\n\t\n\t  }, {\n\t    key: 'shouldFetchOnParamsUpdate',\n\t    value: function shouldFetchOnParamsUpdate() {\n\t      return true;\n\t    }\n\t\n\t    // **onFetchSuccess**<br/>\n\t    // Called when a fetch is successful.\n\t\n\t  }, {\n\t    key: 'onFetchSuccess',\n\t    value: function onFetchSuccess() {}\n\t\n\t    // **onFetchError**<br/>\n\t    // Called when a fetch is unsuccessful.\n\t\n\t  }, {\n\t    key: 'onFetchError',\n\t    value: function onFetchError() {}\n\t\n\t    // **onPostSuccess**<br/>\n\t    // Called when a post request is successful.\n\t\n\t  }, {\n\t    key: 'onPostSuccess',\n\t    value: function onPostSuccess() {}\n\t\n\t    // **onPostError**<br/>\n\t    // Called when a post request is unsuccessful.\n\t\n\t  }, {\n\t    key: 'onPostError',\n\t    value: function onPostError() {}\n\t\n\t    // **onPutSuccess**<br/>\n\t    // Called when a Put request is successful.\n\t\n\t  }, {\n\t    key: 'onPutSuccess',\n\t    value: function onPutSuccess() {}\n\t\n\t    // **onPutError**<br/>\n\t    // Called when a Put request is unsuccessful.\n\t\n\t  }, {\n\t    key: 'onPutError',\n\t    value: function onPutError() {}\n\t\n\t    // **onDeleteSuccess**<br/>\n\t    // Called when a Destroy request is successful.\n\t\n\t  }, {\n\t    key: 'onDeleteSuccess',\n\t    value: function onDeleteSuccess() {}\n\t\n\t    // **onDeleteError**<br/>\n\t    // Called when a Destroy request is unsuccessful.\n\t\n\t  }, {\n\t    key: 'onDeleteError',\n\t    value: function onDeleteError() {}\n\t\n\t    // **sync**<br/>\n\t    // See [Backbone.Model.sync](http://backbonejs.org/#Model-sync)\n\t\n\t  }, {\n\t    key: 'sync',\n\t    value: function sync(method, model, options) {\n\t      return _backbone.Model.prototype.sync.call(model, method, model, options);\n\t    }\n\t\n\t    // **url**<br/>\n\t    // See [Backbone.Model.url](http://backbonejs.org/#Model-url)\n\t\n\t  }, {\n\t    key: 'url',\n\t    value: function url(model) {\n\t      _backbone.Model.prototype.url.call(model);\n\t    }\n\t\n\t    // **parse**<br/>\n\t    // See [Backbone.Model.parse](http://backbonejs.org/#Model-parse)\n\t\n\t  }, {\n\t    key: 'parse',\n\t    value: function parse(resp, options, model) {\n\t      _backbone.Model.prototype.parse.call(model);\n\t    }\n\t\n\t    // **removeChannel**<br/>\n\t    // @param [channel]: String<br/>\n\t    // The name of the channel to remove\n\t    //\n\t    // Removes the given channel. Called by channels when they are no longer required.\n\t\n\t  }, {\n\t    key: 'removeChannel',\n\t    value: function removeChannel(channel) {\n\t      delete this.channels[channel.name];\n\t    }\n\t\n\t    // **addSubscription**<br/>\n\t    // @param [subscriber]: Object\n\t    // A subscription to the service. This must contain an HTTP method: `GET` and `POST` are currently supported.<br/>\n\t    // For fetches, this should also contain a `params` object and optionally a `pollingInterval` in ms.<br/>\n\t    // For posts, this should contain a `postParams` object.\n\t    //\n\t    // Adds a subscription to the service, triggering a request.\n\t\n\t  }, {\n\t    key: 'addSubscription',\n\t    value: function addSubscription(subscriber) {\n\t      var method = subscriber.method || 'GET';\n\t      switch (method) {\n\t        case 'GET':\n\t          return this.addGetSubscription(subscriber);\n\t        case 'POST':\n\t          return this.post(subscriber.postParams);\n\t        case 'PUT':\n\t          return this.put(subscriber.putParams);\n\t        case 'DELETE':\n\t          return this.delete(subscriber.deleteParams);\n\t      }\n\t    }\n\t\n\t    // **addGetSubscription**<br/>\n\t    // @param @param [subscriber]: Object<br/>\n\t    // A subscription to the service. This should contain a params object and optionally a pollingInterval in ms.\n\t    //\n\t    // Adds a subscription to the service, triggering a fetch request.\n\t\n\t  }, {\n\t    key: 'addGetSubscription',\n\t    value: function addGetSubscription(subscriber) {\n\t      var channelName = this.channelForParams(subscriber.params);\n\t      var channel = this.channels[channelName];\n\t\n\t      if (channel) {\n\t        channel.addSubscription(subscriber);\n\t      } else {\n\t        this.channels[channelName] = new ServiceChannel(this._window, channelName, this, [subscriber]);\n\t      }\n\t    }\n\t\n\t    // **removeSubscription**<br/>\n\t    // @param [subscriber]: Object<br/>\n\t    // A subscription to the service. This must be the same reference as the object used when subscribing (i.e. ===)\n\t    //\n\t    // Removes a subscription to the service.\n\t\n\t  }, {\n\t    key: 'removeSubscription',\n\t    value: function removeSubscription(subscriber) {\n\t      if (subscriber) {\n\t        var channelId = this.channelForParams(subscriber.params);\n\t        var channel = this.channels[channelId];\n\t\n\t        if (channel) {\n\t          channel.removeSubscription(subscriber);\n\t        }\n\t      }\n\t    }\n\t\n\t    // **getModelInstance**<br/>\n\t    // @param [params]: Object<br/>\n\t    // The params for the request.\n\t    //\n\t    // @returns [modelInstance]: [Backbone.Model](http://backbonejs.org/#Model)\n\t    // The Backbone model on which XHR requests are performed.\n\t    //\n\t    // Returns a Backbone model on which XHR requests are performed.\n\t\n\t  }, {\n\t    key: 'getModelInstance',\n\t    value: function getModelInstance(params) {\n\t      return new this.Model(params);\n\t    }\n\t\n\t    // **propagateResponse**<br/>\n\t    // See [Backbone.Events.trigger](http://backbonejs.org/#Events-trigger)\n\t\n\t  }, {\n\t    key: 'propagateResponse',\n\t    value: function propagateResponse(key, responseData) {\n\t      return this.trigger(key, responseData);\n\t    }\n\t\n\t    // **fetch**<br/>\n\t    // @param [params]: Object<br/>\n\t    // The consolidated params for a request\n\t    //\n\t    // Makes a fetch request with the given params. Either onFetchSuccess or onFetchError\n\t    // will be called when the request is resolved.\n\t\n\t  }, {\n\t    key: 'fetch',\n\t    value: function fetch(params) {\n\t      var model = this.getModelInstance(params);\n\t      return model.fetch({\n\t        success: this.onFetchSuccess,\n\t        error: this.onFetchError\n\t      });\n\t    }\n\t\n\t    // **post**<br/>\n\t    // @param [params]: Object<br/>\n\t    // The consolidated params for a request\n\t    //\n\t    // Makes a post request with the given params. Either onPostSuccess or onPostError\n\t    // will be called when the request is resolved.\n\t\n\t  }, {\n\t    key: 'post',\n\t    value: function post(params) {\n\t      var model = this.getModelInstance(params);\n\t      return model.save(undefined, {\n\t        success: this.onPostSuccess,\n\t        error: this.onPostError\n\t      });\n\t    }\n\t  }, {\n\t    key: 'put',\n\t    value: function put(params) {\n\t      var model = this.getModelInstance(params);\n\t      if (!model.get('id')) {\n\t        throw 'PUT requests must have an id specified in putParams';\n\t      }\n\t\n\t      return model.save(undefined, {\n\t        success: this.onPutSuccess,\n\t        error: this.onPutError\n\t      });\n\t    }\n\t  }, {\n\t    key: 'delete',\n\t    value: function _delete(params) {\n\t      var model = this.getModelInstance(params);\n\t      return model.destroy({\n\t        success: this.onDeleteSuccess,\n\t        error: this.onDeleteError\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return APIService;\n\t}();\n\t\n\t_underscore2.default.extend(APIService.prototype, _backbone.Events);\n\t\n\texports.default = APIService;\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _underscore = __webpack_require__(2);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tvar _Producer2 = __webpack_require__(16);\n\t\n\tvar _Producer3 = _interopRequireDefault(_Producer2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t// ## IdProducer\n\t//\n\t// An IdProducer produces data for multiple models.\n\t//\n\t// When an ordinary producer produces data, it produces all of its data to all of its subscribers.<br/>\n\t// An IdProducer produces data for multiple data models, each of which has its own id.\n\t// A subscription to an IdProducer specifies an id which corresponds to the model it is interested in.\n\t// When a model's data changes, the IdProducer produces the data for that model to the subscribers that\n\t// are subscribed to that model's id.\n\t\n\t\n\tvar IdProducer = function (_Producer) {\n\t  _inherits(IdProducer, _Producer);\n\t\n\t  _createClass(IdProducer, [{\n\t    key: 'idType',\n\t\n\t\n\t    // This is the type of the model ids.<br/>\n\t    // This should be value types, and are numbers by default.<br/>\n\t    // Trying to add a subscription with an invalid type throws an error.\n\t    get: function get() {\n\t      return this._idType || _typeof(0);\n\t    },\n\t    set: function set(type) {\n\t      this._idType = type;\n\t    }\n\t  }]);\n\t\n\t  function IdProducer() {\n\t    _classCallCheck(this, IdProducer);\n\t\n\t    // An array containing the ids of the models that have been added, removed\n\t    // or updated since the last time data was produced\n\t    var _this = _possibleConstructorReturn(this, (IdProducer.__proto__ || Object.getPrototypeOf(IdProducer)).apply(this, arguments));\n\t\n\t    _this.updatedIds = [];\n\t\n\t    // A map of the subscriptions to this producer. The keys of this map are model ids\n\t    // and the values are arrays of subscription options objects.\n\t    _this.subscriptions = {};\n\t    return _this;\n\t  }\n\t\n\t  // **subscribe**<br/>\n\t  // @param [options]: Object<br/>\n\t  // Subsciption options. Can be used to get the id to unsubscribe from.\n\t  //\n\t  // Subscribe to the producer, if the id is of valid type.\n\t\n\t\n\t  _createClass(IdProducer, [{\n\t    key: 'subscribe',\n\t    value: function subscribe(options) {\n\t      var id = this.idForOptions(options);\n\t      if (!this.isIdOfValidType(id)) {\n\t        throw 'expected the subscription key to be a ' + this.idType + ' but got a ' + (typeof id === 'undefined' ? 'undefined' : _typeof(id));\n\t      }\n\t      if (this.subscriptions[id]) {\n\t        this.subscriptions[id].push(options);\n\t      } else {\n\t        this.subscriptions[id] = [options];\n\t      }\n\t\n\t      return this.produceDataSync(id);\n\t    }\n\t\n\t    // **isIdOfValidType**<br/>\n\t    // @param [id]: Anything<br/>\n\t    // Method to validate the type of the id that is passed with the subscription\n\t    // Override this if needed\n\t\n\t  }, {\n\t    key: 'isIdOfValidType',\n\t    value: function isIdOfValidType(id) {\n\t      return (typeof id === 'undefined' ? 'undefined' : _typeof(id)) === this.idType;\n\t    }\n\t\n\t    // **onDiffInRepository**<br/>\n\t    // @param [repository]: [Repository](Repository.html)<br/>\n\t    // The repository whose data changed.\n\t    //\n\t    // @param [diff]: Object<br/>\n\t    // An object containing arrays of data items that were added, removed and changed\n\t    //\n\t    // Handles updates from repositories. Filters the given models to only those that have subscriptions\n\t    // and produces data for them.\n\t\n\t  }, {\n\t    key: 'onDiffInRepository',\n\t    value: function onDiffInRepository(repository, diff) {\n\t      var _this2 = this;\n\t\n\t      var addRemoveMap = function addRemoveMap(model) {\n\t        var id = _this2.idForModel(model, repository);\n\t        if (_underscore2.default.isArray(id)) {\n\t          return _underscore2.default.filter(id, _this2.hasId.bind(_this2));\n\t        } else if (_this2.hasId(id)) {\n\t          return id;\n\t        }\n\t      };\n\t\n\t      var changeMap = function changeMap(model) {\n\t        if (_this2.shouldPropagateModelChange(model, repository)) {\n\t          var id = _this2.idForModel(model, repository);\n\t          if (_underscore2.default.isArray(id)) {\n\t            return _underscore2.default.filter(id, _this2.hasId.bind(_this2));\n\t          } else if (_this2.hasId(id)) {\n\t            return id;\n\t          }\n\t        }\n\t      };\n\t\n\t      var addedModelIds = _underscore2.default.map(diff.added, addRemoveMap);\n\t      var removedModelIds = _underscore2.default.map(diff.removed, addRemoveMap);\n\t      var updatedModelIds = _underscore2.default.map(diff.changed, changeMap);\n\t\n\t      var ids = _underscore2.default.flattenDepth([addedModelIds, removedModelIds, updatedModelIds], 2);\n\t      ids = _underscore2.default.compact(ids);\n\t\n\t      this.produceDataForIds(ids);\n\t    }\n\t\n\t    // **produceDataForIds**<br/>\n\t    // @param [ids]: Array of idTypes<br/>\n\t    // An array of model ids to produce data for. Defaults to all subscribed models.<br/>\n\t    //\n\t    // Produces data for all given model ids.\n\t\n\t  }, {\n\t    key: 'produceDataForIds',\n\t    value: function produceDataForIds() {\n\t      var ids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.allIds();\n\t\n\t      this.updatedIds = _underscore2.default.uniq(this.updatedIds.concat(ids));\n\t      return this.produceData();\n\t    }\n\t\n\t    // **allIds**<br/>\n\t    // @returns [ids]: Array of idTypes<br/>\n\t    // All subscribed ids.\n\t    //\n\t    // Returns an array of all subscribed ids.\n\t\n\t  }, {\n\t    key: 'allIds',\n\t    value: function allIds() {\n\t      var ids = _underscore2.default.keys(this.subscriptions);\n\t\n\t      if (this.idType === _typeof(0)) {\n\t        ids = _underscore2.default.map(ids, function (id) {\n\t          return parseInt(id, 10);\n\t        });\n\t      }\n\t\n\t      return ids;\n\t    }\n\t\n\t    // **produceData**<br/>\n\t    // Aynchronously produces data for all models whose data has changed since the last time data was produced.\n\t\n\t    // **produceDataSync**<br/>\n\t    // @param [id]: idType<br/>\n\t    // The id to produce data for. Defaults to all ids whose data has changed since the last time data was produced.\n\t    //\n\t    // Synchronously produces data for all models whose data has changed since the last time data was produced. If an id is supplied, only data for the model with that id is produced.\n\t\n\t  }, {\n\t    key: 'produceDataSync',\n\t    value: function produceDataSync(id) {\n\t      if (id) {\n\t        return this.produce([id]);\n\t      } else if (this.updatedIds.length > 0) {\n\t        var ids = this.updatedIds.slice();\n\t        this.updatedIds.length = 0;\n\t\n\t        return this.produce(ids);\n\t      }\n\t    }\n\t\n\t    // **unsubscribe** <br/>\n\t    // @param [options]: Object <br/>\n\t    // Subsciption options. Can be used to get the id to unsubscribe from. This must be the same reference as the options used when subscribing (i.e. ===).\n\t    //\n\t    // Unsubscribe from the producer.\n\t\n\t  }, {\n\t    key: 'unsubscribe',\n\t    value: function unsubscribe(options) {\n\t      var id = this.idForOptions(options);\n\t      var subscription = this.subscriptions[id];\n\t      if (subscription) {\n\t        var index = subscription.indexOf(options);\n\t        if (index !== -1) {\n\t          subscription.splice(index, 1);\n\t\n\t          if (subscription.length === 0) {\n\t            delete this.subscriptions[id];\n\t          }\n\t        }\n\t      }\n\t    }\n\t\n\t    // **produce**<br/>\n\t    // @param [ids]: Array of idTypes<br/>\n\t    // List of ids to produce data for.\n\t    //\n\t    // Produce (gathered, decorated and validated) data for the ids.\n\t\n\t  }, {\n\t    key: 'produce',\n\t    value: function produce(ids) {\n\t      var _this3 = this;\n\t\n\t      var data = void 0;\n\t      ids.forEach(function (id) {\n\t        data = _this3.currentData(id) || {};\n\t        data.id = id;\n\t        data = _this3.decorate(data);\n\t        _this3._validateContract(data);\n\t\n\t        _underscore2.default.each(_this3.registeredComponents, function (component) {\n\t          if (id === _this3.idForOptions(component.options)) {\n\t            return component.callback(data);\n\t          }\n\t        });\n\t      });\n\t    }\n\t\n\t    // **currentData**<br/>\n\t    // @param [id]: The id to produce data for\n\t    //\n\t    // This is where the actual collection of the data is done. <br/>\n\t\n\t  }, {\n\t    key: 'currentData',\n\t    value: function currentData() {}\n\t    // default implementation is a noop\n\t\n\t    // **hasId**<br/>\n\t    // @param [id]: idType<br/>\n\t    // The id to check for.\n\t    //\n\t    // @returns [hasId]: boolean<br/>\n\t    // True if there is a subscription for the given id, false otherwise.\n\t    //\n\t    // Returns true if there is a subscription for the given id, otherwise returns false.\n\t\n\t  }, {\n\t    key: 'hasId',\n\t    value: function hasId(id) {\n\t      return !(this.subscriptions[id] === null || typeof this.subscriptions[id] === 'undefined');\n\t    }\n\t\n\t    // **shouldPropagateModelChange**<br/>\n\t    // @param [model]: Object<br/>\n\t    // A model\n\t    //\n\t    // @param [repository]: [Repository](Repository.html)<br/>\n\t    // The repository which contains the model.<br/>\n\t    //\n\t    // Called when a model changes to determine whether to produce data for the model. If true, then data for the model will be produced for this change.\n\t\n\t  }, {\n\t    key: 'shouldPropagateModelChange',\n\t    value: function shouldPropagateModelChange() {\n\t      return true;\n\t    }\n\t\n\t    // **idForModel**<br/>\n\t    // @param [model]: Object<br/>\n\t    // A model\n\t    //\n\t    // @param [repository]: [Repository](Repository.html)<br/>\n\t    // The repository which contains the model.\n\t    //\n\t    // @returns [id]: idType or array of idTypes<br/>\n\t    // The internal id of the given model, or an array of internal ids which correspond to the given model.\n\t    //\n\t    // Translates a model to an id or array of ids of type idType which uniquely identifies the model internally to this producer.\n\t\n\t  }, {\n\t    key: 'idForModel',\n\t    value: function idForModel(model) {\n\t      return model.id;\n\t    }\n\t\n\t    // **idForOptions**<br/>\n\t    // @param [options]: Object<br/>\n\t    // A subscription options object.\n\t    //\n\t    // @returns [id]: idType<br/>\n\t    // The internal id of the model that the subscription options refer to.\n\t    //\n\t    // Translates subscription options to an id of type idType which uniquely identifies the model internally to this producer.\n\t\n\t  }, {\n\t    key: 'idForOptions',\n\t    value: function idForOptions(options) {\n\t      return options.id;\n\t    }\n\t  }]);\n\t\n\t  return IdProducer;\n\t}(_Producer3.default);\n\t\n\texports.default = IdProducer;\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _underscore = __webpack_require__(2);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tvar _backbone = __webpack_require__(3);\n\t\n\tvar _Repository = __webpack_require__(17);\n\t\n\tvar _Repository2 = _interopRequireDefault(_Repository);\n\t\n\tvar _validateContract2 = __webpack_require__(12);\n\t\n\tvar _validateContract3 = _interopRequireDefault(_validateContract2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t// ## Producer\n\t//\n\t// A Producer listens to data changes in one or several repositories\n\t// and produces data on a certain Production Key.\n\t//\n\t//\n\t\n\tvar Producer = function () {\n\t  _createClass(Producer, [{\n\t    key: 'PRODUCTION_KEY',\n\t\n\t\n\t    // The production key that is used for subscribing to the producer. <br/>\n\t    // This key should be overridden in the subclass.\n\t    get: function get() {\n\t      return this._productionKey;\n\t    },\n\t    set: function set(productionKey) {\n\t      this._productionKey = productionKey;\n\t    }\n\t\n\t    // The repository (or repositories) that the producer listens to.\n\t\n\t  }, {\n\t    key: 'repositories',\n\t    get: function get() {\n\t      return this._repositories || [];\n\t    },\n\t    set: function set(repositories) {\n\t      this._repositories = repositories;\n\t    }\n\t\n\t    // The decorator(s) that is used for formatting the produced data.\n\t\n\t  }, {\n\t    key: 'decorators',\n\t    get: function get() {\n\t      return this._decorators || [];\n\t    },\n\t    set: function set(decorators) {\n\t      this._decorators = decorators;\n\t    }\n\t  }], [{\n\t    key: 'extend',\n\t    get: function get() {\n\t      return _backbone.Model.extend;\n\t    }\n\t  }]);\n\t\n\t  function Producer() {\n\t    _classCallCheck(this, Producer);\n\t\n\t    this.onDiffInRepository = this.onDiffInRepository.bind(this);\n\t    this.registeredComponents = {};\n\t    this.produceData = _underscore2.default.throttle(this.produceDataSync, 100);\n\t\n\t    // Keeps track of if the producer has subscribed to its repositories or not.\n\t    this._isSubscribedToRepositories = false;\n\t  }\n\t\n\t  _createClass(Producer, [{\n\t    key: 'getInstance',\n\t    value: function getInstance() {\n\t      if (this.instance === null || typeof this.instance === 'undefined') {\n\t        this.instance = new this.constructor();\n\t      }\n\t      return this.instance;\n\t    }\n\t\n\t    // **addComponent** <br/>\n\t    // @param [subscription]: Object <br/>\n\t    // The subscription, which contains an id, a callback and options. <br/>\n\t    //\n\t    // Adds (subscribes) a component to the producer.\n\t\n\t  }, {\n\t    key: 'addComponent',\n\t    value: function addComponent(subscription) {\n\t      var existingSubscription = this.registeredComponents[subscription.id];\n\t      if (existingSubscription === null || typeof existingSubscription === 'undefined') {\n\t        this.registeredComponents[subscription.id] = subscription;\n\t        this.subscribe(subscription.options);\n\t\n\t        if (!this._isSubscribedToRepositories) {\n\t          this.subscribeToRepositories();\n\t          this._isSubscribedToRepositories = true;\n\t        }\n\t      }\n\t    }\n\t\n\t    // **removeComponent** <br/>\n\t    // @param [componentId]: String <br/>\n\t    // The id of the component that should be removed. <br/>\n\t    //\n\t    // Removes a component (its subscription) from the producer.\n\t\n\t  }, {\n\t    key: 'removeComponent',\n\t    value: function removeComponent(componentId) {\n\t      var subscription = this.registeredComponents[componentId];\n\t\n\t      if (subscription) {\n\t        this.unsubscribe(subscription.options);\n\t        delete this.registeredComponents[subscription.id];\n\t\n\t        var shouldUnsubscribe = true;\n\t        for (var _componentId in this.registeredComponents) {\n\t          if (this.registeredComponents.hasOwnProperty(_componentId)) {\n\t            shouldUnsubscribe = false;\n\t            break;\n\t          }\n\t        }\n\t\n\t        if (shouldUnsubscribe) {\n\t          this.unsubscribeFromRepositories();\n\t          this._isSubscribedToRepositories = false;\n\t        }\n\t      }\n\t    }\n\t\n\t    // **subscribeToRepositories** <br/>\n\t    // Subscribes to all the repositories. <br/>\n\t    // Also registers the callback function if the repository has one.\n\t\n\t  }, {\n\t    key: 'subscribeToRepositories',\n\t    value: function subscribeToRepositories() {\n\t      var _this = this;\n\t\n\t      this.repositories.forEach(function (repository) {\n\t        if (repository instanceof _Repository2.default) {\n\t          _this.subscribeToRepository(repository);\n\t        } else if (repository.repository instanceof _Repository2.default && typeof repository.callback === 'string') {\n\t          _this.subscribeToRepository(repository.repository, _this[repository.callback]);\n\t        } else {\n\t          throw 'unexpected format of producer repositories definition';\n\t        }\n\t      });\n\t    }\n\t\n\t    // **unsubscribeFromRepositories** <br/>\n\t    // Unsubscribes from all the repositories.\n\t\n\t  }, {\n\t    key: 'unsubscribeFromRepositories',\n\t    value: function unsubscribeFromRepositories() {\n\t      var _this2 = this;\n\t\n\t      this.repositories.forEach(function (repository) {\n\t        if (repository instanceof _Repository2.default) {\n\t          _this2.unsubscribeFromRepository(repository);\n\t        } else if (repository.repository instanceof _Repository2.default && typeof repository.callback === 'string') {\n\t          _this2.unsubscribeFromRepository(repository.repository);\n\t        }\n\t      });\n\t    }\n\t\n\t    // **subscribeToRepository** <br/>\n\t    // @param [repository]: Object <br/>\n\t    // The repository to subscribe to. <br/>\n\t    // @param [callback]: String <br/>\n\t    // The method that should be executed on repository diff.\n\t    //\n\t    // Sets up a subscription to a repository with a custom or predefined callback.\n\t\n\t  }, {\n\t    key: 'subscribeToRepository',\n\t    value: function subscribeToRepository(repository, callback) {\n\t      var _this3 = this;\n\t\n\t      if (!callback) {\n\t        callback = function callback(diff) {\n\t          return _this3.onDiffInRepository(repository, diff);\n\t        };\n\t      }\n\t\n\t      this.listenTo(repository, _Repository2.default.prototype.REPOSITORY_DIFF, callback);\n\t    }\n\t\n\t    // **unsubscribeFromRepository** <br/>\n\t    // @param [repository]: Object <br/>\n\t    // The repository to unsubscribe from.\n\t    //\n\t    // Unsubscribes from a repository.\n\t\n\t  }, {\n\t    key: 'unsubscribeFromRepository',\n\t    value: function unsubscribeFromRepository(repository) {\n\t      this.stopListening(repository, _Repository2.default.prototype.REPOSITORY_DIFF);\n\t    }\n\t\n\t    // **subscribe** <br/>\n\t    // Called when a component is added.\n\t\n\t  }, {\n\t    key: 'subscribe',\n\t    value: function subscribe() {\n\t      this.produceDataSync();\n\t    }\n\t\n\t    // **onDiffInRepository** <br/>\n\t    // Used as default callback when subscribing to a repository.\n\t\n\t  }, {\n\t    key: 'onDiffInRepository',\n\t    value: function onDiffInRepository() {\n\t      this.produceData();\n\t    }\n\t  }, {\n\t    key: 'produceDataSync',\n\t    value: function produceDataSync() {\n\t      this.produce(this.currentData());\n\t    }\n\t\n\t    // ***produce*** <br/>\n\t    // @param [data]: Object <br/>\n\t    // The current data.\n\t    //\n\t    // This method is called by the produceDataSync method <br/>\n\t    // and in turn calls methods for decoration of the current data <br/>\n\t    // and validation of its contract.\n\t\n\t  }, {\n\t    key: 'produce',\n\t    value: function produce(data) {\n\t      data = this.decorate(data);\n\t      this._validateContract(data);\n\t      for (var componentId in this.registeredComponents) {\n\t        if (this.registeredComponents.hasOwnProperty(componentId)) {\n\t          var component = this.registeredComponents[componentId];\n\t          component.callback(data);\n\t        }\n\t      }\n\t    }\n\t\n\t    // **currentData** <br/>\n\t    // This is where the actual collection of the data is done. <br/>\n\t    // Default implementation is a noop.\n\t\n\t  }, {\n\t    key: 'currentData',\n\t    value: function currentData() {}\n\t\n\t    // **unsubscribe** <br/>\n\t    // Default implementation is a noop.\n\t\n\t  }, {\n\t    key: 'unsubscribe',\n\t    value: function unsubscribe() {}\n\t\n\t    // **decorate** <br/>\n\t    // @param [data]: Object <br/>\n\t    // The data to decorate .<br/>\n\t    // @return data: Object <br/>\n\t    // The decorated data.\n\t    //\n\t    // Runs the assigned decorator(s) on the data.\n\t\n\t  }, {\n\t    key: 'decorate',\n\t    value: function decorate(data) {\n\t      for (var i = 0; i < this.decorators.length; i++) {\n\t        var decorator = this.decorators[i];\n\t        decorator(data);\n\t      }\n\t      return data;\n\t    }\n\t  }, {\n\t    key: 'modelToJSON',\n\t    value: function modelToJSON(model) {\n\t      return model.toJSON();\n\t    }\n\t  }, {\n\t    key: 'modelsToJSON',\n\t    value: function modelsToJSON(models) {\n\t      return _underscore2.default.map(models, this.modelToJSON);\n\t    }\n\t\n\t    // **_validateContract** <br/>\n\t    // @param [dataToProduce]: Object <br/>\n\t    // The data to validate. <br/>\n\t    // @return : Boolean\n\t    //\n\t    // Used to validate data against a predefined contract, if there is one.\n\t\n\t  }, {\n\t    key: '_validateContract',\n\t    value: function _validateContract(dataToProduce) {\n\t      var _PRODUCTION_KEY = this.PRODUCTION_KEY,\n\t          key = _PRODUCTION_KEY.key,\n\t          contract = _PRODUCTION_KEY.contract;\n\t\n\t      if (!contract) {\n\t        throw new Error('The subscriptionKey ' + key + ' doesn\\'t have a contract specified');\n\t      }\n\t\n\t      (0, _validateContract3.default)(contract, dataToProduce, this, 'producing');\n\t    }\n\t  }, {\n\t    key: 'extend',\n\t    value: function extend(obj, mixin) {\n\t      for (var name in mixin) {\n\t        if (mixin.hasOwnProperty(name)) {\n\t          var method = mixin[name];\n\t          obj[name] = method;\n\t        }\n\t      }\n\t      return obj;\n\t    }\n\t  }, {\n\t    key: 'mixin',\n\t    value: function mixin(instance, _mixin) {\n\t      return this.extend(instance, _mixin);\n\t    }\n\t  }]);\n\t\n\t  return Producer;\n\t}();\n\t\n\t_underscore2.default.extend(Producer.prototype, _backbone.Events);\n\t\n\texports.default = Producer;\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _underscore = __webpack_require__(2);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tvar _backbone = __webpack_require__(3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t//  ## Repository\n\t//\n\t// The Repository extends a [Backbone Collection](http://backbonejs.org/#Collection)\n\t// and adds functionality for diffing and throttling data\n\t//\n\t//\n\t\n\tvar Repository = function (_Collection) {\n\t  _inherits(Repository, _Collection);\n\t\n\t  _createClass(Repository, [{\n\t    key: 'REPOSITORY_DIFF',\n\t    get: function get() {\n\t      return 'repository_diff';\n\t    }\n\t  }, {\n\t    key: 'REPOSITORY_ADD',\n\t    get: function get() {\n\t      return 'repository_add';\n\t    }\n\t  }, {\n\t    key: 'REPOSITORY_CHANGE',\n\t    get: function get() {\n\t      return 'repository_change';\n\t    }\n\t  }, {\n\t    key: 'REPOSITORY_REMOVE',\n\t    get: function get() {\n\t      return 'repository_remove';\n\t    }\n\t    // Plain object holding reference to all the Backbone Collection models **added** since last throttled batch\n\t\n\t  }]);\n\t\n\t  function Repository() {\n\t    var _ref;\n\t\n\t    _classCallCheck(this, Repository);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    var _this = _possibleConstructorReturn(this, (_ref = Repository.__proto__ || Object.getPrototypeOf(Repository)).call.apply(_ref, [this].concat(args)));\n\t\n\t    _this._onAdd = _this._onAdd.bind(_this);\n\t    _this._onChange = _this._onChange.bind(_this);\n\t    _this._onRemove = _this._onRemove.bind(_this);\n\t    _this._triggerUpdates = _this._triggerUpdates.bind(_this);\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Repository, [{\n\t    key: 'initialize',\n\t    value: function initialize() {\n\t      _get(Repository.prototype.__proto__ || Object.getPrototypeOf(Repository.prototype), 'initialize', this).apply(this, arguments);\n\t      this.cid = this.cid || _underscore2.default.uniqueId('c');\n\t\n\t      this._throttledAddedModels = {};\n\t      // Plain object holding reference to all the Backbone Collection models **updated** since last throttled batch\n\t      this._throttledChangedModels = {};\n\t      // Plain object holding reference to all the Backbone Collection models **removed** since last throttled batch\n\t      this._throttledRemovedModels = {};\n\t\n\t      // Reference to a [throttled](http://underscorejs.org/#throttle) version of the _triggerUpdates\n\t      // function in order to avoid flooding the listeners\n\t      this._throttledTriggerUpdates = _underscore2.default.throttle(this._triggerUpdates, 100, { leading: false });\n\t\n\t      this.addThrottledListeners();\n\t    }\n\t\n\t    // **addThrottledListeners** <br/>\n\t    // Catch all events triggered from Backbone Collection in order to make throttling possible.\n\t    // It still bubbles the event for outside subscribers.\n\t\n\t  }, {\n\t    key: 'addThrottledListeners',\n\t    value: function addThrottledListeners() {\n\t      this.on('all', this._onAll);\n\t    }\n\t\n\t    // **getByIds** <br/>\n\t    // @param [ids]: Array <br/>\n\t    // @return models: Array\n\t\n\t  }, {\n\t    key: 'getByIds',\n\t    value: function getByIds(ids) {\n\t      var models = [];\n\t      for (var i = 0; i < ids.length; i++) {\n\t        var id = ids[i];\n\t        models.push(this.get(id));\n\t      }\n\t      return models;\n\t    }\n\t  }, {\n\t    key: 'isEmpty',\n\t    value: function isEmpty() {\n\t      return this.models.length <= 0;\n\t    }\n\t\n\t    // **_onAll** <br/>\n\t    // see *addThrottledListeners*\n\t\n\t  }, {\n\t    key: '_onAll',\n\t    value: function _onAll(event, model) {\n\t      switch (event) {\n\t        case 'add':\n\t          this._onAdd(model);break;\n\t        case 'change':\n\t          this._onChange(model);break;\n\t        case 'remove':\n\t          this._onRemove(model);break;\n\t      }\n\t\n\t      this._throttledTriggerUpdates();\n\t    }\n\t  }, {\n\t    key: '_onAdd',\n\t    value: function _onAdd(model) {\n\t      this._throttledAddedModels[model.id] = model;\n\t    }\n\t  }, {\n\t    key: '_onChange',\n\t    value: function _onChange(model) {\n\t      this._throttledChangedModels[model.id] = model;\n\t    }\n\t  }, {\n\t    key: '_onRemove',\n\t    value: function _onRemove(model) {\n\t      this._throttledRemovedModels[model.id] = model;\n\t    }\n\t  }, {\n\t    key: '_throttledAdd',\n\t    value: function _throttledAdd() {\n\t      var event = Repository.prototype.REPOSITORY_ADD;\n\t      var models = _underscore2.default.values(this._throttledAddedModels);\n\t      this._throttledAddedModels = {};\n\t      return this._throttledEvent(event, models, event);\n\t    }\n\t  }, {\n\t    key: '_throttledChange',\n\t    value: function _throttledChange() {\n\t      var event = Repository.prototype.REPOSITORY_CHANGE;\n\t      var models = _underscore2.default.values(this._throttledChangedModels);\n\t      this._throttledChangedModels = {};\n\t      return this._throttledEvent(event, models, event);\n\t    }\n\t  }, {\n\t    key: '_throttledRemove',\n\t    value: function _throttledRemove() {\n\t      var event = Repository.prototype.REPOSITORY_REMOVE;\n\t      var models = _underscore2.default.values(this._throttledRemovedModels);\n\t      this._throttledRemovedModels = {};\n\t      return this._throttledEvent(event, models, event);\n\t    }\n\t  }, {\n\t    key: '_throttledEvent',\n\t    value: function _throttledEvent(event, models, eventRef) {\n\t      if (models.length > 0) {\n\t        this.trigger(event, models, eventRef);\n\t      }\n\t      return models;\n\t    }\n\t\n\t    // **_throttledDiff** <br/>\n\t    // @param [added]: Array <br/>\n\t    // @param [changed]: Array <br/>\n\t    // @param [removed]: Array <br/>\n\t    //\n\t    // An event type called REPOSITORY_DIFF is added to the repository which supplies a consolidated\n\t    // response with all the added, removed and updated models since last throttled batch\n\t\n\t  }, {\n\t    key: '_throttledDiff',\n\t    value: function _throttledDiff(added, changed, removed) {\n\t      var event = Repository.prototype.REPOSITORY_DIFF;\n\t      if (added.length || changed.length || removed.length) {\n\t\n\t        added = _underscore2.default.difference(added, removed);\n\t        var consolidated = _underscore2.default.uniq(added.concat(changed));\n\t\n\t        var models = {\n\t          added: added,\n\t          changed: changed,\n\t          removed: removed,\n\t          consolidated: consolidated\n\t        };\n\t\n\t        this.trigger(event, models, event);\n\t      }\n\t    }\n\t  }, {\n\t    key: '_triggerUpdates',\n\t    value: function _triggerUpdates() {\n\t      this._throttledDiff(this._throttledAdd(), this._throttledChange(), this._throttledRemove());\n\t    }\n\t  }]);\n\t\n\t  return Repository;\n\t}(_backbone.Collection);\n\t\n\texports.default = Repository;\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Repository2 = __webpack_require__(17);\n\t\n\tvar _Repository3 = _interopRequireDefault(_Repository2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t//  ## ServiceRepository\n\t//\n\t// A ServiceRepository extends the Repository class and enables\n\t// subscriptions for services\n\t//\n\t\n\tvar ServiceRepository = function (_Repository) {\n\t  _inherits(ServiceRepository, _Repository);\n\t\n\t  function ServiceRepository() {\n\t    _classCallCheck(this, ServiceRepository);\n\t\n\t    return _possibleConstructorReturn(this, (ServiceRepository.__proto__ || Object.getPrototypeOf(ServiceRepository)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(ServiceRepository, [{\n\t    key: 'addSubscriptionToService',\n\t\n\t\n\t    // **addSubscriptionToService** <br/>\n\t    // @param [service]: Object <br/>\n\t    // The service to add the subscription to </br>\n\t    // @param [subscription]: Object <br/>\n\t    // The subscription to add to the service\n\t    //\n\t    // Adds a subscription to a service\n\t    value: function addSubscriptionToService(service, subscription) {\n\t      service.addSubscription(subscription);\n\t    }\n\t\n\t    // **removeSubscriptionFromService** <br/>\n\t    // @param [service]: Object <br/>\n\t    // The service to remove the subscription from </br>\n\t    // @param [subscription]: Object <br/>\n\t    // The subscription to remove from the service\n\t    //\n\t    // Removes a subscription from a service\n\t\n\t  }, {\n\t    key: 'removeSubscriptionFromService',\n\t    value: function removeSubscriptionFromService(service, subscription) {\n\t      service.removeSubscription(subscription);\n\t    }\n\t\n\t    // **addSubscription** <br/>\n\t    // @param [type]: String <br/>\n\t    // Used to identify the service for this subscription.\n\t    // @param [subscription]: Object <br/>\n\t    // Used to configure the service request\n\t    //\n\t    // Maps the service through type before subscribing\n\t\n\t  }, {\n\t    key: 'addSubscription',\n\t    value: function addSubscription(type, subscription) {\n\t      if (this.services[type]) {\n\t        this.addSubscriptionToService(this.services[type], subscription);\n\t      }\n\t    }\n\t\n\t    // **removeSubscription** <br/>\n\t    // @param [type]: String <br/>\n\t    // Used to identify the service for this subscription.\n\t    // @param [subscription]: Object <br/>\n\t    // Used to configure the service request\n\t    //\n\t    // Maps the service through type before unsubscribing\n\t\n\t  }, {\n\t    key: 'removeSubscription',\n\t    value: function removeSubscription(type, subscription) {\n\t      if (this.services[type]) {\n\t        this.removeSubscriptionFromService(this.services[type], subscription);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'services',\n\t    get: function get() {\n\t      return this._services || {};\n\t    },\n\t    set: function set(services) {\n\t      this._services = services;\n\t    }\n\t  }]);\n\t\n\t  return ServiceRepository;\n\t}(_Repository3.default);\n\t\n\t// Expose ServiceRepository on the Vigor object\n\t\n\t\n\texports.default = ServiceRepository;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// vigor.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0d65a2d727e5449986b3","import EventBus from 'common/EventBus';\nimport EventKeys from 'common/EventKeys';\nimport SubscriptionKeys from 'common/SubscriptionKeys';\nimport ComponentBase from 'component/ComponentBase';\nimport ComponentView from 'component/ComponentView';\nimport ComponentViewModel from 'component/ComponentViewModel';\nimport ProducerManager from 'datacommunication/ProducerManager';\nimport ProducerMapper from 'datacommunication/ProducerMapper';\nimport Subscription from 'datacommunication/Subscription';\nimport validateContract from 'utils/validateContract';\nimport {settings, setup} from './settings';\nimport APIService from 'datacommunication/apiservices/APIService';\nimport IdProducer from 'datacommunication/producers/IdProducer';\nimport Producer from 'datacommunication/producers/Producer';\nimport Repository from 'datacommunication/repositories/Repository';\nimport ServiceRepository from 'datacommunication/repositories/ServiceRepository';\n\nconst Vigor = {\n  EventBus,\n  EventKeys,\n  SubscriptionKeys,\n  ComponentBase,\n  ComponentView,\n  ComponentViewModel,\n  ProducerManager,\n  ProducerMapper,\n  Subscription,\n  settings,\n  setup,\n  validateContract,\n  APIService,\n  IdProducer,\n  Producer,\n  Repository,\n  ServiceRepository\n};\n\nexport default Vigor;\n\n// In the long run this should be the only export needed, default\n// default above is\nexport {\n  EventBus,\n  EventKeys,\n  SubscriptionKeys,\n  ComponentBase,\n  ComponentView,\n  ComponentViewModel,\n  ProducerManager,\n  ProducerMapper,\n  Subscription,\n  settings,\n  setup,\n  validateContract,\n  APIService,\n  IdProducer,\n  Producer,\n  Repository,\n  ServiceRepository\n}\n\n\n// WEBPACK FOOTER //\n// ./src/bootstrap.js","import _ from 'underscore';\nimport Events from 'backbone';\nimport EventKeys from './EventKeys';\n\nclass EventRegistry {}\n\n_.extend(EventRegistry.prototype, Events);\n\n// A global EventBus for the entire application\n//\n// @example How to subscribe to events\n//   EventBus.subscribe EventKeys.EXAMPLE_EVENT_KEY, (event) ->\n//      # do something with `event` here...\n//\nclass EventBus {\n\n  // Bind a `callback` function to an event key. Passing `all` as key will\n  // bind the callback to all events fired.\n  //\n  // @param [String] the event key to subscribe to. See datacommunication/EventKeys for available keys.\n  // @param [function] the callback that receives the event when it is sent\n  subscribe(key, callback) {\n    if (!this._eventKeyExists(key)) {\n      throw `key '${key}' does not exist in EventKeys`;\n    }\n\n    if ('function' !== typeof callback) {\n      throw 'callback is not a function';\n    }\n\n    return this.eventRegistry.on(key, callback);\n  }\n\n  // Bind a callback to only be triggered a single time.\n  // After the first time the callback is invoked, it will be removed.\n  //\n  // @param [String] the event key to subscribe to. See datacommunication/EventKeys for available keys.\n  // @param [function] the callback that receives the single event when it is sent\n  subscribeOnce(key, callback) {\n    if (!this._eventKeyExists(key)) {\n      throw `key '${key}' does not exist in EventKeys`;\n    }\n\n    if ('function' !== typeof callback) {\n      throw 'callback is not a function';\n    }\n\n    return this.eventRegistry.once(key, callback);\n  }\n\n\n  // Remove a callback.\n  //\n  // @param [String] the event key to unsubscribe from.\n  // @param [Function] the callback that is to be unsubscribed\n  unsubscribe(key, callback) {\n    if (!this._eventKeyExists(key)) {\n      throw `key '${key}' does not exist in EventKeys`;\n    }\n\n    if ('function' !== typeof callback) {\n      throw 'callback is not a function';\n    }\n\n    return this.eventRegistry.off(key, callback);\n  }\n\n  // Send an event message  to all bound callbacks. Callbacks are passed the\n  // message argument, (unless you're listening on `all`, which will\n  // cause your callback to receive the true name of the event as the first\n  // argument).\n  //\n  // @param [String] the event key to send the message on.\n  // @param [Object] the message to send\n  send(key, message) {\n    if (!this._eventKeyExists(key)) {\n      throw `key '${key}' does not exist in EventKeys`;\n    }\n\n    return this.eventRegistry.trigger(key, message);\n  }\n\n  _eventKeyExists(key) {\n    const keys = [];\n    for (let property in EventKeys) {\n      if (EventKeys.hasOwnProperty(property)) {\n        let value = EventKeys[property];\n        keys.push(value);\n      }\n    }\n    return keys.indexOf(key) >= 0;\n  }\n}\n\nEventBus.prototype.eventRegistry = new EventRegistry();\n\nexport default new EventBus();\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/EventBus.js","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"_\",\"commonjs2\":\"lodash\",\"commonjs\":\"lodash\",\"amd\":\"lodash\"}\n// module id = 2\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"Backbone\",\"commonjs2\":\"backbone\",\"commonjs\":\"backbone\",\"amd\":\"backbone\"}\n// module id = 3\n// module chunks = 0","import _ from 'underscore';\n\nconst EventKeys = {\n  ALL_EVENTS: 'all',\n  extend: (object) => {\n    _.extend(EventKeys, object);\n    return EventKeys;\n  }\n}\n\nexport default EventKeys;\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/EventKeys.js","import _ from 'underscore';\nconst SubscriptionKeys = {\n  extend: (object) => {\n    _.extend(SubscriptionKeys, object);\n    return SubscriptionKeys;\n  }\n}\n\nexport default SubscriptionKeys;\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/SubscriptionKeys.js","import _ from 'underscore';\nimport {Events, Model} from 'backbone';\n// ##ComponentBase\n// This class is intended to be the public interface for a component.\n//\n// By default it exposes a render and a dispose method which should be overridden\n//\n// To create a component you would typically do a index file which extends ComponentBase\n// and then instantiate any views, models, collections etc. that the component need\n// within the index file.\n\nclass ComponentBase {\n  // ComponentBase.extend = Backbone.Model.extend;\n  // Add Vigor.extend (Backbone.Model.extend) <br/>\n  // [Backbone.Model.extend](http://backbonejs.org/#Model-extend)\n  static get extend() {\n    return Model.extend;\n  }\n  // **render:** <br/>\n  // Override this method\n  render() {\n    throw 'ComponentBase->render needs to be over-ridden';\n  }\n\n  // **dispose:** <br/>\n  // Override this method\n  dispose() {\n    throw 'ComponentBase->dispose needs to be over-ridden';\n  }\n}\n\n// Extends Backbone.Events <br/>\n// [Backbone.Events](http://backbonejs.org/#Events)\n_.extend(ComponentBase.prototype, Events);\n\nexport default ComponentBase;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/ComponentBase.js","import {View} from 'backbone';\n// ##ComponentView\n// This class is intended to be used as a base class for all views within a component\n// It enforces five methods to unify the structure of ComponentViews accross a large application:\n//\n// - renderStaticContent\n// - renderDynamicContent\n// - addSubscriptions\n// - removeSubscriptions\n// - dispose\n//\n\nclass ComponentView extends View {\n\n  // **constructor** <br/>\n  constructor(options) {\n    super(options);\n    // These methods are required to make our view code\n    // structure more consistent (just make them empty if\n    // you don't need them).\n    this._checkIfImplemented([\n      'renderStaticContent',\n      'renderDynamicContent',\n      'addSubscriptions',\n      'removeSubscriptions',\n      'dispose'\n    ]);\n\n  }\n\n  // **initialize** <br/>\n  // @param object <br/>\n  // @return this: Object <br/>\n  // view options, usually containing a viewModel instance <br/>\n  initialize(options) {\n    if (options && options.viewModel) {\n      this.viewModel = options.viewModel;\n    }\n    super.initialize(...arguments);\n    return this;\n  }\n\n  // **render** <br/>\n  // @return this: Object <br/>\n  // the views render method, it will call @renderStaticContent and @addSubscriptions <br/>\n  render() {\n    this.renderStaticContent();\n    this.addSubscriptions();\n    return this;\n  }\n\n  // **renderStaticContent** <br/>\n  // @return this: Object <br/>\n  // Override this. <br/>\n  // Render parts of component that don't rely on model. <br/>\n  renderStaticContent() {\n    return this;\n  }\n\n  // **renderDynamicContent** <br/>\n  // @return this: Object <br/>\n  // Override this. <br/>\n  // Render parts of component that relies on model. <br/>\n  renderDynamicContent() {\n    return this;\n  }\n\n  // **addSubscriptions** <br/>\n  // @return this: Object <br/>\n  // Override this. <br/>\n  // Add view model subscriptions if needed. <br/>\n  addSubscriptions() {\n    return this;\n  }\n\n  // **removeSubscriptions** <br/>\n  // @return this: Object <br/>\n  // Override this. <br/>\n  // Remove view model subscriptions.\n  removeSubscriptions() {\n    return this;\n  }\n\n  // **dispose** <br/>\n  // Removes events and dom elements related to the view <br/>\n  // Override this, and call super.\n  dispose() {\n    if (this.model) {\n      this.model.unbind()\n    }\n    this.removeSubscriptions();\n    this.stopListening();\n    this.$el.off();\n    this.$el.remove();\n    return this.off();\n  }\n\n  // **_checkIfImplemented** <br/>\n  // @param array: Array <br/>\n  // Ensures that passed methods are implemented in the view\n  _checkIfImplemented(methodNames) {\n    return (() => {\n      let result = [];\n      for (let i = 0; i < methodNames.length; i++) {\n        let methodName = methodNames[i];\n        let item;\n        if (!this.constructor.prototype.hasOwnProperty(methodName)) {\n          throw new Error(`${this.constructor.name} - ${methodName}() must be implemented in View.`);\n        }\n        result.push(item);\n      }\n      return result;\n    })();\n  }\n}\n\nexport default ComponentView;\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/ComponentView.js","import _ from 'underscore';\nimport {Model} from 'backbone';\nimport ProducerManager from 'datacommunication/ProducerManager';\nimport validateContract from 'utils/validateContract';\n\n// ##ComponentViewModel\n// This class is intended to be the base class for all view models in a component\n//\n// A ComponentViewModel handles communication with producers through the\n// ProducerManager\nclass ComponentViewModel {\n  static get extend() {\n    return Model.extend;\n  }\n  // **constructor** <br/>\n  // The constructor generates a unique id for the ViewModel that will be used to\n  // handle subscriptions in the ProducerManager\n  constructor() {\n    this.id = `ComponentViewModel_${_.uniqueId()}`;\n  }\n\n  // **dispose** <br/>\n  // Remves all subscriptions\n  dispose() {\n    return this.unsubscribeAll();\n  }\n\n  // **subscribe** <br/>\n  // @param [key]: Object <br/>\n  // A Vigor.SubscriptionKey containing a key and contract property<br/>\n  // @param [callback]: Function <br/>\n  // Callback function that takes care of produced data\n  // @param [options]: Object (optional)<br/>\n  // Pass any optional data that might be needed by a Producer\n  //\n  // Adds a subscription on a specific SubscriptionKey to the ProducerManager.\n  // Whenever new data is produced the callback will be called with new data as param\n  subscribe(key, callback, options) {\n    return ProducerManager.subscribe(this.id, key, callback, options);\n  }\n\n  // **unsubscribe** <br/>\n  // @param [key]: Object <br/>\n  // A Vigor.SubscriptionKey containing a key and contract property<br/>\n  //\n  // Removes a subscription on specific key\n  unsubscribe(key) {\n    return ProducerManager.unsubscribe(this.id, key);\n  }\n\n  // **unsubscribeAll** <br/>\n  // Removes all subscriptions\n  unsubscribeAll() {\n    return ProducerManager.unsubscribeAll(this.id);\n  }\n\n  // **validateContract** <br/>\n  // @param [contract]: Object <br/>\n  // The contract specified in the SubscriptionKey used when subscribing for data\n  // @param [incommingData]: Object <br/>\n  // data supplied through the subscription\n  //\n  // Compares contract with incomming data and checks values, types, and number\n  // of properties, call this method manually from your callback if you want to\n  // validate incoming data\n  validateContract(contract, incommingData) {\n    return validateContract(contract, incommingData, this.id);\n  }\n}\n\nexport default ComponentViewModel;\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/ComponentViewModel.js","import ProducerMapper from 'datacommunication/ProducerMapper';\nimport Subscription from 'datacommunication/Subscription';\n\n//  ## ProducerManager\n// The ProducerManager utilizies the [ProducerMapper](ProducerMapper.html) to (un)register components on subscriptions.\n//\nconst ProducerManager = {\n\n  // **registerProducers:** </br>\n  // @param [producers]: Array <br/>\n  //\n  // Registers a one or more producers in mapper\n  registerProducers(producers) {\n    producers.forEach(producer => ProducerMapper.register(producer));\n  },\n\n  // **producerForKey:** </br>\n  // @param [subscriptionKey]: String <br/>\n  // @returns [producer]: Producer </br>\n  //\n  // Retrieves a registered producer for the given subscription\n  producerForKey(subscriptionKey) {\n    return ProducerMapper.producerForKey(subscriptionKey);\n  },\n\n  // **subscribe:** </br>\n  // @param [componentId]: String <br/>\n  // @param [subscriptionKey]: Object <br/>\n  // @param [callback]: Function <br/>\n  // @param [subscriptionOptions]: Object (default empty object) <br/>\n  //\n  // Registers a component with [componentId] to recieve data changes on given [subscriptionKey] through the component [callback]\n  subscribe(componentId, subscriptionKey, callback, subscriptionOptions = {}) {\n    const subscription = new Subscription(componentId, callback, subscriptionOptions);\n    const producer = this.producerForKey(subscriptionKey);\n    producer.addComponent(subscription);\n  },\n\n  // **unsubscribe:** </br>\n  // @param [componentId]: String <br/>\n  // @param [subscriptionKey]: String <br/>\n  //\n  // Unsubscribes a component with [componentId] from the producer for the given [subscriptionKey]\n  unsubscribe(componentId, subscriptionKey) {\n    const producer = this.producerForKey(subscriptionKey);\n    producer.removeComponent(componentId);\n  },\n\n  // **unsubscribeAll:** </br>\n  // @param [componentId]: String <br/>\n  //\n  // Unsubscribes a component with [componentId] from any producer that might have it in its subscription\n  unsubscribeAll(componentId) {\n    ProducerMapper.producers.forEach(producer => producer.prototype.getInstance().removeComponent(componentId));\n  }\n};\n\nexport default ProducerManager;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datacommunication/ProducerManager.js","// Array of currently registered producers\nconst producers = [];\n\n// Table look-up of subscription key to mapped producer\nlet producersByKey = {};\n\n// Error thrown when no producers at all have been registered and component starts a subscription\nconst NO_PRODUCERS_ERROR = \"There are no producers registered - register producers through the ProducerManager\";\n\n// Error thrown when a component tries to register a subscription and no producer has been registered for that subscription\nconst NO_PRODUCER_FOUND_ERROR = key => `No producer found for subscription ${key}!`;\n\n// Error thrown when a component tries to register a subscription to a producer has already been registered for that subscription\nconst KEY_ALREADY_REGISTERED = key => `A producer for the key ${key} is already registered`;\n\n// ##ProducerMapper\n// Mapper class to keep track of the available producers and their corresponding subscriptions\nconst ProducerMapper = {\n\n  producers,\n  // **producerClassForKey:** </br>\n  // @param [subscriptionKey]: String <br/>\n  // @returns [producerClass]: Class </br>\n  // @throws [NO_PRODUCERS_ERROR], [NO_PRODUCER_FOUND_ERROR] </br>\n  //\n  // Returns the corresponding producer class for the given [subscriptionKey]\n  producerClassForKey(subscriptionKey) {\n    const { key } = subscriptionKey;\n    if (producers.length === 0) {\n      throw NO_PRODUCERS_ERROR;\n    }\n\n    const producerClass = producersByKey[key];\n\n    if (!producerClass) {\n      throw NO_PRODUCER_FOUND_ERROR(key);\n    }\n\n    return producerClass;\n  },\n\n  // **producerForKey:** </br>\n  // @param [subscriptionKey]: String <br/>\n  // @returns [producerClass]: Producer </br>\n  //\n  // Returns the instance of the producer mapper to the [subscriptionKey]\n  producerForKey(subscriptionKey) {\n    const producerClass = this.producerClassForKey(subscriptionKey);\n    return producerClass.prototype.getInstance();\n  },\n\n  // **register:** </br>\n  // @param [producerClass]: Class <br/>\n  // @throws [KEY_ALREADY_REGISTERED] </br>\n  //\n  // Registers a new producer type [producerClass] in the mapper\n  register(producerClass) {\n    if (producers.indexOf(producerClass) === -1) {\n      producers.push(producerClass);\n      const subscriptionKey = producerClass.prototype.PRODUCTION_KEY;\n      const { key } = subscriptionKey;\n\n      if (producersByKey[key]) {\n        throw KEY_ALREADY_REGISTERED(key);\n      }\n\n      return producersByKey[key] = producerClass;\n    }\n  },\n\n  // **reset:** </br>\n  //\n  // Used in unit tests to reset the mapper\n  reset() {\n    producers.length = 0;\n    return producersByKey = {};\n  }\n};\n\nexport default ProducerMapper;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datacommunication/ProducerMapper.js","class Subscription {\n  constructor(id, callback, options) {\n    this.id = id;\n    this.callback = callback;\n    this.options = options;\n  }\n}\n\nexport default Subscription;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datacommunication/Subscription.js","import _ from 'underscore';\nimport {settings} from '../settings';\n// **ValidateContract**<br/>\n// @param [contract]: Object<br/>\n// The contract to validate the data against. The contract should match the shape of the expected data object and\n// contain primitive values of the same type as the expected values.\n//\n// @param [dataToCompare]: Object<br/>\n// The data to validate.\n//\n// @param [comparatorId]: String<br/>\n// A human-readable name for the comparator, to be used to make nice error messages when things go wrong.\n//\n// @param [verb]: String<br/>\n// A human-readable name for the action that the comparator is trying to achieve, to be used to make nice error\n// messages when things go wrong. The default value is `receiving`.\n//\n// @returns `true` if the data is valid according to the given contract, `false` otherwise.\n//\n// Validates the given data according to the given contract. If the shape or any of the primitive types of the data\n// object differ from the contract object, the contract is violated and this function returns `false`. Otherwise, it\n// returns `true`.\nconst validateContract = function(contract, dataToCompare, comparatorId, verb = 'recieving') {\n  if (!settings.shouldValidateContract) { return; }\n  if (!contract) {\n    throw new Error(`The ${comparatorId} does not have any contract specified`);\n  }\n\n  if (!dataToCompare) {\n    throw new Error(`${comparatorId} is trying to validate the contract but does not recieve any data to compare against the contract`);\n  }\n\n  if (_.isArray(contract) && _.isArray(dataToCompare) === false) {\n    throw new Error(`${comparatorId}'s compared data is supposed to be an array but is a ${typeof dataToCompare}`);\n  }\n\n  if (_.isObject(contract) && _.isArray(contract) === false && _.isArray(dataToCompare)) {\n    throw new Error(`${comparatorId}'s compared data is supposed to be an object but is an array`);\n  }\n\n  if (_.isObject(contract) && _.isArray(contract) === false) {\n    const contractKeyCount = _.keys(contract).length;\n    const dataKeyCount = _.keys(dataToCompare).length;\n\n    if (dataKeyCount > contractKeyCount) {\n      throw new Error(`${comparatorId} is ${verb} more data then what is specified in the contract`, contract,dataToCompare);\n    } else if (dataKeyCount < contractKeyCount) {\n      throw new Error(`${comparatorId} is ${verb} less data then what is specified in the contract`, contract,dataToCompare);\n    }\n  }\n\n  for (let key in contract) {\n    if (contract.hasOwnProperty(key)) {\n      const val = contract[key];\n      if (!(key in dataToCompare)) {\n        throw new Error(`${comparatorId} has data but is missing the key: ${key}`);\n      }\n\n      if (val !== null || val !== undefined) {\n        if (typeof dataToCompare[key] !== typeof val) {\n          throw new Error(`${comparatorId} is ${verb} data of the wrong type according to the contract, ${key}, expects ${typeof val} but gets ${typeof dataToCompare[key]}`);\n        }\n      }\n    }\n  }\n\n  return true;\n};\n\nexport default validateContract;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/validateContract.js","import _ from 'underscore';\n\nconst settings = {\n  shouldValidateContract: false\n}\n\nfunction setup (newSettings) {\n  _.extend(settings, newSettings);\n}\n\nexport {\n  settings,\n  setup\n}\n\n\n// WEBPACK FOOTER //\n// ./src/settings.js","import _ from 'underscore';\nimport {Model, Events} from 'backbone';\n// ## ServiceChannel\n// The ServiceChannel class is private to the APIService class. Service channels are used to group subscriptions to an\n// API service into sets of subscriptions whose requirements can be fulfilled with a single request, thus reducing\n// network usage.<br/>\n// Each subscription to the channel may have a polling interval, and the channel will ask the service that created\n// it to perform a fetch when the polling intervals elapse.<br/>\n// Service channels are not used for post requests, which are always started immediately, idependent of other requests,\n// and cannot be polled.\nclass ServiceChannel {\n\n  // If subscribers are provided, the requests will start immediately.\n  constructor(_window, name, service, subscribers) {\n    this._window = _window;\n    this.service = service;\n\n    // The name of this channel; used by the API service to uniquely identify it.\n    this.name = name;\n\n    // An array of subscription objects, each of which may contain a pollingInterval in ms, and a params object\n    this.subscribers = subscribers;\n\n    // The minimum polling interval of the subscribers, or 0\n    this.pollingInterval = undefined;\n\n    // The unix timestamp of the last poll\n    this.lastPollTime = undefined;\n\n    // A timeout id, as returned by window.setTimeout, for the next poll.\n    this.timeout = undefined;\n\n    this.params = this.getParams();\n\n    this.restart();\n  }\n\n\n  // **restart**<br/>\n  // Restarts the channel, causing it to schedule the next request.<br/>\n  // This method can be called at any time, since it takes into account the time since the last request.\n  restart() {\n    let wait;\n    let hasLastPollTime = !(typeof this.lastPollTime === 'undefined' || this.lastPollTime === null);\n    this.pollingInterval = this.getPollingInterval();\n\n    if (hasLastPollTime) {\n      const elapsedWait = this._window.Date.now() - this.lastPollTime;\n      wait = Math.max(this.pollingInterval - elapsedWait, 0);\n    } else {\n      wait = 0;\n    }\n    this.setupNextFetch(wait);\n  }\n\n  // **stop**<br/>\n  // Stops the channel and asks the service to remove it.\n  stop() {\n    this._window.clearTimeout(this.timeout);\n    this.timeout = undefined;\n    this.subscribers = undefined;\n    this.params = undefined;\n    this.service.removeChannel(this);\n  }\n\n  // **setupNextFetch**<br/>\n  // @param [wait]: Number<br/>\n  // The amount of time to wait until the fetch. Defaults to the current polling interval.\n  //\n  // Schedules the next fetch to start the given number of ms in the future.\n  setupNextFetch(wait = this.pollingInterval) {\n    this._window.clearTimeout(this.timeout);\n\n    this.timeout = this._window.setTimeout(() => {\n      this.lastPollTime = this._window.Date.now();\n      this.service.fetch(this.params);\n      // Remove requests with a zero polling interval since the request has now been made\n      this.cullImmediateRequests();\n\n      // Check to make sure we still have subscribers after culling\n      // immediate requests\n      if (this.subscribers) {\n        // if we still have subscribers, set up the next fetch\n        if (this.pollingInterval > 0) {\n          this.setupNextFetch();\n        } else {\n          this.timeout = undefined;\n        }\n      }\n    }, wait);\n  }\n\n\n  // **addSubscription**<br/>\n  // @param [subscriber]: Object<br/>\n  // The subscription to add. May contain a pollingInterval in ms, and a params object.\n  //\n  // Add a subscription to the channel, causing the params to update. A fetch may be scheduled or rescheduled.\n  addSubscription(subscriber) {\n    if (!_.includes(this.subscribers, subscriber)) {\n      this.subscribers.push(subscriber);\n\n      this.onSubscriptionsChanged();\n    }\n  }\n\n\n  // **removeSubscription**<br/>\n  // @param [subscriber]: Object<br/>\n  // The subscription to remove. This must be the same reference as the object used when subscribing (i.e. ===).\n  //\n  // Remove a subscription to the channel, causing the params to update. The next fetch may be rescheduled or the\n  // channel may be stopped if this is the last subscriber.\n  removeSubscription(subscriber) {\n    if (_.includes(this.subscribers, subscriber)) {\n      this.subscribers = _.without(this.subscribers, subscriber);\n\n      if (this.subscribers.length === 0) {\n        this.stop();\n      } else {\n        this.onSubscriptionsChanged();\n      }\n    }\n  }\n\n  // **onSubscriptionsChanged**<br/>\n  // Updates the params and reschedules the next fetch if necessary.\n  onSubscriptionsChanged() {\n    const params = this.getParams();\n    const didParamsChange = !_.isEqual(params, this.params);\n\n    const oldParams = this.params;\n    this.params = params;\n\n    let shouldFetchImmediately = false;\n\n    if (didParamsChange) {\n      shouldFetchImmediately = this.service.shouldFetchOnParamsUpdate(this.params, oldParams, this.name);\n    }\n\n    if (shouldFetchImmediately) {\n      this.lastPollTime = undefined;\n      this.restart();\n\n    } else if (this.getPollingInterval() !== this.pollingInterval) {\n      this.restart();\n    }\n  }\n\n\n  // **getPollingInterval**<br/>\n  // @returns [pollingInterval]: Number<br/>\n  // The current polling interval in ms.\n  //\n  // Returns the lowest polling interval of subscribers. If no subscriber has a polling interval,\n  // returns 0 which represents an immediate request.\n  getPollingInterval() {\n    const pollingIntervals = _.map(this.subscribers, subscriber => subscriber.pollingInterval);\n    const pollingInterval = _.min(pollingIntervals);\n    if (pollingInterval === Infinity) {\n      return 0;\n    } else {\n      return pollingInterval;\n    }\n  }\n\n\n  // **getParams**<br/>\n  // @returns [params]: Object<br/>\n  // The current consolidated params for this channel.\n  //\n  // A channel always holds an up-to-date copy of the consilidated params.\n  // This method updates those params, and is called whenever a subscriber is\n  // added or removed.\n  getParams() {\n    let params = _.map(this.subscribers, subscriber => subscriber.params);\n    params = _.compact(params);\n    return this.service.consolidateParams(params, this.name);\n  }\n\n\n  // **cullImmediateRequests**<br/>\n  // Removes all subscribers that do not have a polling interval.\n  cullImmediateRequests() {\n    let immediateRequests = _.filter(this.subscribers, (subscriber) => {\n      return (subscriber.pollingInterval === undefined) || (subscriber.pollingInterval === 0);\n    });\n\n    // Remove the immediate requests. This will never trigger a\n    // restart because the polling interval is zero and cannot be lowered\n    _.each(immediateRequests, (immediateRequest) => {\n      return this.removeSubscription(immediateRequest);\n    });\n\n    this.pollingInterval = this.getPollingInterval();\n  }\n}\n\n\n// ## APIService\n// An API service makes XHRs when it is subscribed to.\nclass APIService {\n\n  static get extend() {\n    return Model.extend;\n  }\n\n  // Optionally pass in a window object to stub Date, set/clearTimeout for testing\n  constructor(_window = window) {\n    const service = this;\n    // An object referencing the channels owned by this service by name\n    this.channels = {};\n    this._window = _window;\n\n    this.Model = Model.extend({\n      sync(method, model, options) {\n        return service.sync(method, model, options);\n      },\n\n      url() {\n        return service.url(this);\n      },\n\n      parse(resp, options) {\n        return service.parse(resp, options, this);\n      }\n    });\n  }\n\n  // **consolidateParams**<br/>\n  // @param [paramsArray]: Array&lt;Object&gt;<br/>\n  // An array of all of the params of all of the subscribers on a channel\n  //\n  // @param [channelName]: String<br/>\n  // The name of the channel\n  //\n  // @returns [params]: Object\n  // The consolidated params that should be used for the request\n  //\n  // Converts an array of params for the subscribers on this channel into\n  // a single params object. The default implementation just returns the first\n  // params object in the array. This is fine when using the default implementation of\n  // channelForParams because all the params are identical anyway.\n  consolidateParams(paramsArray) {\n    return paramsArray[0];\n  }\n\n\n  // **channelForParams**<br/>\n  // @param [params]: Object<br/>\n  // The params to be added to a channel\n  //\n  // @returns [channelName]: String<br/>\n  // The name of the channel to add the params to\n  //\n  // Returns the name of the channel that should request data for the given params.\n  // By default, only subscribers with identical params are put on the same channel\n  channelForParams(params) {\n    // `null`/`undefined` should be equivalent to an empty params object\n    return (JSON.stringify(params)) || \"{}\";\n  }\n\n\n  // **shouldFetchOnParamsUpdate**<br/>\n  // @param [newParams]: Object<br/>\n  // The new consolidated params object\n  //\n  // @param [oldParams]: Object<br/>\n  // The old consolidated params object\n  //\n  // @param [channelName]: String<br/>\n  // The name of the channel that the params are for.\n  //\n  // This method is called by the service channel when its consolidated params change.\n  // Return true if the service should fetch immediately after the given params update, or\n  // false if the service should wait until the next scheduled poll time.<br/>\n  // The default implementation always returns true, forcing an immediate fetch.\n  shouldFetchOnParamsUpdate() {\n    return true;\n  }\n\n\n  // **onFetchSuccess**<br/>\n  // Called when a fetch is successful.\n  onFetchSuccess() {}\n\n  // **onFetchError**<br/>\n  // Called when a fetch is unsuccessful.\n  onFetchError() {}\n\n  // **onPostSuccess**<br/>\n  // Called when a post request is successful.\n  onPostSuccess() {}\n\n  // **onPostError**<br/>\n  // Called when a post request is unsuccessful.\n  onPostError() {}\n\n  // **onPutSuccess**<br/>\n  // Called when a Put request is successful.\n  onPutSuccess() {}\n\n  // **onPutError**<br/>\n  // Called when a Put request is unsuccessful.\n  onPutError() {}\n\n  // **onDeleteSuccess**<br/>\n  // Called when a Destroy request is successful.\n  onDeleteSuccess() {}\n\n  // **onDeleteError**<br/>\n  // Called when a Destroy request is unsuccessful.\n  onDeleteError() {}\n\n  // **sync**<br/>\n  // See [Backbone.Model.sync](http://backbonejs.org/#Model-sync)\n  sync(method, model, options) {\n    return Model.prototype.sync.call(model, method, model, options);\n  }\n\n  // **url**<br/>\n  // See [Backbone.Model.url](http://backbonejs.org/#Model-url)\n  url(model) {\n    Model.prototype.url.call(model);\n  }\n\n  // **parse**<br/>\n  // See [Backbone.Model.parse](http://backbonejs.org/#Model-parse)\n  parse(resp, options, model) {\n    Model.prototype.parse.call(model);\n  }\n\n  // **removeChannel**<br/>\n  // @param [channel]: String<br/>\n  // The name of the channel to remove\n  //\n  // Removes the given channel. Called by channels when they are no longer required.\n  removeChannel(channel) {\n    delete this.channels[channel.name];\n  }\n\n  // **addSubscription**<br/>\n  // @param [subscriber]: Object\n  // A subscription to the service. This must contain an HTTP method: `GET` and `POST` are currently supported.<br/>\n  // For fetches, this should also contain a `params` object and optionally a `pollingInterval` in ms.<br/>\n  // For posts, this should contain a `postParams` object.\n  //\n  // Adds a subscription to the service, triggering a request.\n  addSubscription(subscriber) {\n    const method = subscriber.method || 'GET';\n    switch (method) {\n      case 'GET':\n        return this.addGetSubscription(subscriber);\n      case 'POST':\n        return this.post(subscriber.postParams);\n      case 'PUT':\n        return this.put(subscriber.putParams);\n      case 'DELETE':\n        return this.delete(subscriber.deleteParams);\n    }\n  }\n\n\n  // **addGetSubscription**<br/>\n  // @param @param [subscriber]: Object<br/>\n  // A subscription to the service. This should contain a params object and optionally a pollingInterval in ms.\n  //\n  // Adds a subscription to the service, triggering a fetch request.\n  addGetSubscription(subscriber) {\n    const channelName = this.channelForParams(subscriber.params);\n    const channel = this.channels[channelName];\n\n    if (channel) {\n      channel.addSubscription(subscriber);\n\n    } else {\n      this.channels[channelName] = new ServiceChannel(this._window, channelName, this, [subscriber]);\n    }\n  }\n\n\n  // **removeSubscription**<br/>\n  // @param [subscriber]: Object<br/>\n  // A subscription to the service. This must be the same reference as the object used when subscribing (i.e. ===)\n  //\n  // Removes a subscription to the service.\n  removeSubscription(subscriber) {\n    if (subscriber) {\n      const channelId = this.channelForParams(subscriber.params);\n      const channel = this.channels[channelId];\n\n      if (channel) {\n        channel.removeSubscription(subscriber);\n      }\n    }\n  }\n\n  // **getModelInstance**<br/>\n  // @param [params]: Object<br/>\n  // The params for the request.\n  //\n  // @returns [modelInstance]: [Backbone.Model](http://backbonejs.org/#Model)\n  // The Backbone model on which XHR requests are performed.\n  //\n  // Returns a Backbone model on which XHR requests are performed.\n  getModelInstance(params) {\n    return new this.Model(params);\n  }\n\n\n  // **propagateResponse**<br/>\n  // See [Backbone.Events.trigger](http://backbonejs.org/#Events-trigger)\n  propagateResponse(key, responseData) {\n    return this.trigger(key, responseData);\n  }\n\n\n  // **fetch**<br/>\n  // @param [params]: Object<br/>\n  // The consolidated params for a request\n  //\n  // Makes a fetch request with the given params. Either onFetchSuccess or onFetchError\n  // will be called when the request is resolved.\n  fetch(params) {\n    const model = this.getModelInstance(params);\n    return model.fetch({\n      success: this.onFetchSuccess,\n      error: this.onFetchError\n    });\n  }\n\n  // **post**<br/>\n  // @param [params]: Object<br/>\n  // The consolidated params for a request\n  //\n  // Makes a post request with the given params. Either onPostSuccess or onPostError\n  // will be called when the request is resolved.\n  post(params) {\n    const model = this.getModelInstance(params);\n    return model.save(undefined, {\n      success: this.onPostSuccess,\n      error: this.onPostError\n    });\n  }\n\n  put(params) {\n    const model = this.getModelInstance(params);\n    if (!model.get('id')) {\n      throw 'PUT requests must have an id specified in putParams';\n    }\n\n    return model.save(undefined, {\n      success: this.onPutSuccess,\n      error: this.onPutError\n    });\n  }\n\n  delete(params) {\n    const model = this.getModelInstance(params);\n    return model.destroy({\n      success: this.onDeleteSuccess,\n      error: this.onDeleteError\n    });\n  }\n}\n\n_.extend(APIService.prototype, Events);\n\nexport default APIService;\n\n\n// WEBPACK FOOTER //\n// ./src/datacommunication/apiservices/APIService.js","import _ from 'underscore';\nimport Producer from 'datacommunication/producers/Producer';\n// ## IdProducer\n//\n// An IdProducer produces data for multiple models.\n//\n// When an ordinary producer produces data, it produces all of its data to all of its subscribers.<br/>\n// An IdProducer produces data for multiple data models, each of which has its own id.\n// A subscription to an IdProducer specifies an id which corresponds to the model it is interested in.\n// When a model's data changes, the IdProducer produces the data for that model to the subscribers that\n// are subscribed to that model's id.\n\n\nclass IdProducer extends Producer {\n\n  // This is the type of the model ids.<br/>\n  // This should be value types, and are numbers by default.<br/>\n  // Trying to add a subscription with an invalid type throws an error.\n  get idType() {\n    return this._idType || typeof 0;\n  }\n\n  set idType(type) {\n    this._idType = type;\n  }\n\n  constructor() {\n    super(...arguments);\n    // An array containing the ids of the models that have been added, removed\n    // or updated since the last time data was produced\n    this.updatedIds = [];\n\n    // A map of the subscriptions to this producer. The keys of this map are model ids\n    // and the values are arrays of subscription options objects.\n    this.subscriptions = {};\n  }\n\n\n  // **subscribe**<br/>\n  // @param [options]: Object<br/>\n  // Subsciption options. Can be used to get the id to unsubscribe from.\n  //\n  // Subscribe to the producer, if the id is of valid type.\n  subscribe(options) {\n    const id = this.idForOptions(options);\n    if (!this.isIdOfValidType(id)) {\n      throw `expected the subscription key to be a ${this.idType} but got a ${typeof id}`;\n    }\n    if (this.subscriptions[id]) {\n      this.subscriptions[id].push(options);\n    } else {\n      this.subscriptions[id] = [options];\n    }\n\n    return this.produceDataSync(id);\n  }\n\n  // **isIdOfValidType**<br/>\n  // @param [id]: Anything<br/>\n  // Method to validate the type of the id that is passed with the subscription\n  // Override this if needed\n  isIdOfValidType(id) {\n    return typeof id === this.idType;\n  }\n\n  // **onDiffInRepository**<br/>\n  // @param [repository]: [Repository](Repository.html)<br/>\n  // The repository whose data changed.\n  //\n  // @param [diff]: Object<br/>\n  // An object containing arrays of data items that were added, removed and changed\n  //\n  // Handles updates from repositories. Filters the given models to only those that have subscriptions\n  // and produces data for them.\n  onDiffInRepository(repository, diff) {\n    const addRemoveMap = (model) => {\n      const id = this.idForModel(model, repository);\n      if (_.isArray(id)) {\n        return _.filter(id, this.hasId.bind(this));\n      } else if (this.hasId(id)) {\n        return id;\n      }\n    };\n\n    const changeMap = (model) => {\n      if (this.shouldPropagateModelChange(model, repository)) {\n        let id = this.idForModel(model, repository);\n        if (_.isArray(id)) {\n          return _.filter(id, this.hasId.bind(this));\n        } else if (this.hasId(id)) {\n          return id;\n        }\n      }\n    };\n\n    const addedModelIds = _.map(diff.added, addRemoveMap);\n    const removedModelIds = _.map(diff.removed, addRemoveMap);\n    const updatedModelIds = _.map(diff.changed, changeMap);\n\n    let ids = _.flattenDepth([addedModelIds, removedModelIds, updatedModelIds], 2);\n    ids = _.compact(ids);\n\n    this.produceDataForIds(ids);\n  }\n\n\n  // **produceDataForIds**<br/>\n  // @param [ids]: Array of idTypes<br/>\n  // An array of model ids to produce data for. Defaults to all subscribed models.<br/>\n  //\n  // Produces data for all given model ids.\n  produceDataForIds(ids = this.allIds()) {\n    this.updatedIds = _.uniq(this.updatedIds.concat(ids));\n    return this.produceData();\n  }\n\n  // **allIds**<br/>\n  // @returns [ids]: Array of idTypes<br/>\n  // All subscribed ids.\n  //\n  // Returns an array of all subscribed ids.\n  allIds() {\n    let ids = _.keys(this.subscriptions);\n\n    if (this.idType === (typeof 0)) {\n      ids = _.map(ids, id => parseInt(id, 10));\n    }\n\n    return ids;\n  }\n\n  // **produceData**<br/>\n  // Aynchronously produces data for all models whose data has changed since the last time data was produced.\n\n  // **produceDataSync**<br/>\n  // @param [id]: idType<br/>\n  // The id to produce data for. Defaults to all ids whose data has changed since the last time data was produced.\n  //\n  // Synchronously produces data for all models whose data has changed since the last time data was produced. If an id is supplied, only data for the model with that id is produced.\n  produceDataSync(id) {\n    if (id) {\n      return this.produce([id]);\n\n    } else if (this.updatedIds.length > 0) {\n      let ids = this.updatedIds.slice();\n      this.updatedIds.length = 0;\n\n      return this.produce(ids);\n    }\n  }\n\n\n  // **unsubscribe** <br/>\n  // @param [options]: Object <br/>\n  // Subsciption options. Can be used to get the id to unsubscribe from. This must be the same reference as the options used when subscribing (i.e. ===).\n  //\n  // Unsubscribe from the producer.\n  unsubscribe(options) {\n    const id = this.idForOptions(options);\n    const subscription = this.subscriptions[id];\n    if (subscription) {\n      const index = subscription.indexOf(options);\n      if (index !== -1) {\n        subscription.splice(index, 1);\n\n        if (subscription.length === 0) {\n          delete this.subscriptions[id];\n        }\n      }\n    }\n  }\n\n  // **produce**<br/>\n  // @param [ids]: Array of idTypes<br/>\n  // List of ids to produce data for.\n  //\n  // Produce (gathered, decorated and validated) data for the ids.\n  produce(ids) {\n    let data;\n    ids.forEach((id) => {\n      data = this.currentData(id) || {};\n      data.id = id;\n      data = this.decorate(data);\n      this._validateContract(data);\n\n      _.each(this.registeredComponents, (component) => {\n        if (id === this.idForOptions(component.options)) {\n          return component.callback(data);\n        }\n      });\n\n    });\n  }\n\n  // **currentData**<br/>\n  // @param [id]: The id to produce data for\n  //\n  // This is where the actual collection of the data is done. <br/>\n  currentData() {}\n    // default implementation is a noop\n\n  // **hasId**<br/>\n  // @param [id]: idType<br/>\n  // The id to check for.\n  //\n  // @returns [hasId]: boolean<br/>\n  // True if there is a subscription for the given id, false otherwise.\n  //\n  // Returns true if there is a subscription for the given id, otherwise returns false.\n  hasId(id) {\n    return !(\n      this.subscriptions[id] === null ||\n      typeof(this.subscriptions[id]) === 'undefined'\n    );\n  }\n\n\n  // **shouldPropagateModelChange**<br/>\n  // @param [model]: Object<br/>\n  // A model\n  //\n  // @param [repository]: [Repository](Repository.html)<br/>\n  // The repository which contains the model.<br/>\n  //\n  // Called when a model changes to determine whether to produce data for the model. If true, then data for the model will be produced for this change.\n  shouldPropagateModelChange() {\n    return true;\n  }\n\n  // **idForModel**<br/>\n  // @param [model]: Object<br/>\n  // A model\n  //\n  // @param [repository]: [Repository](Repository.html)<br/>\n  // The repository which contains the model.\n  //\n  // @returns [id]: idType or array of idTypes<br/>\n  // The internal id of the given model, or an array of internal ids which correspond to the given model.\n  //\n  // Translates a model to an id or array of ids of type idType which uniquely identifies the model internally to this producer.\n  idForModel(model) {\n    return model.id;\n  }\n\n  // **idForOptions**<br/>\n  // @param [options]: Object<br/>\n  // A subscription options object.\n  //\n  // @returns [id]: idType<br/>\n  // The internal id of the model that the subscription options refer to.\n  //\n  // Translates subscription options to an id of type idType which uniquely identifies the model internally to this producer.\n  idForOptions(options) {\n    return options.id;\n  }\n}\n\nexport default IdProducer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datacommunication/producers/IdProducer.js","import _ from 'underscore';\nimport {Model, Events} from 'backbone';\nimport Repository from 'datacommunication/repositories/Repository';\nimport validateContract from 'utils/validateContract';\n// ## Producer\n//\n// A Producer listens to data changes in one or several repositories\n// and produces data on a certain Production Key.\n//\n//\n\nclass Producer {\n\n  static get extend() {\n    return Model.extend;\n  }\n\n  // The production key that is used for subscribing to the producer. <br/>\n  // This key should be overridden in the subclass.\n  get PRODUCTION_KEY() {\n   return this._productionKey;\n  }\n\n  set PRODUCTION_KEY(productionKey) {\n   this._productionKey = productionKey;\n  }\n\n  // The repository (or repositories) that the producer listens to.\n  get repositories() {\n   return this._repositories || [];\n  }\n\n  set repositories(repositories) {\n    this._repositories = repositories;\n  }\n\n  // The decorator(s) that is used for formatting the produced data.\n  get decorators() {\n   return this._decorators || [];\n  }\n\n  set decorators(decorators) {\n    this._decorators = decorators;\n  }\n\n\n  constructor() {\n    this.onDiffInRepository = this.onDiffInRepository.bind(this);\n    this.registeredComponents = {};\n    this.produceData = _.throttle(this.produceDataSync, 100);\n\n    // Keeps track of if the producer has subscribed to its repositories or not.\n    this._isSubscribedToRepositories = false;\n  }\n\n\n  getInstance() {\n    if (this.instance === null || typeof(this.instance) === 'undefined') {\n      this.instance = new this.constructor();\n    }\n    return this.instance;\n  }\n\n\n  // **addComponent** <br/>\n  // @param [subscription]: Object <br/>\n  // The subscription, which contains an id, a callback and options. <br/>\n  //\n  // Adds (subscribes) a component to the producer.\n  addComponent(subscription) {\n    const existingSubscription = this.registeredComponents[subscription.id];\n    if (existingSubscription === null || typeof(existingSubscription) === 'undefined') {\n      this.registeredComponents[subscription.id] = subscription;\n      this.subscribe(subscription.options);\n\n      if (!this._isSubscribedToRepositories) {\n        this.subscribeToRepositories();\n        this._isSubscribedToRepositories = true;\n      }\n    }\n  }\n\n\n  // **removeComponent** <br/>\n  // @param [componentId]: String <br/>\n  // The id of the component that should be removed. <br/>\n  //\n  // Removes a component (its subscription) from the producer.\n  removeComponent(componentId) {\n    const subscription = this.registeredComponents[componentId];\n\n    if (subscription) {\n      this.unsubscribe(subscription.options);\n      delete this.registeredComponents[subscription.id];\n\n      let shouldUnsubscribe = true;\n      for (let componentId in this.registeredComponents) {\n        if (this.registeredComponents.hasOwnProperty(componentId)) {\n          shouldUnsubscribe = false;\n          break;\n        }\n      }\n\n      if (shouldUnsubscribe) {\n        this.unsubscribeFromRepositories();\n        this._isSubscribedToRepositories = false;\n      }\n    }\n  }\n\n\n  // **subscribeToRepositories** <br/>\n  // Subscribes to all the repositories. <br/>\n  // Also registers the callback function if the repository has one.\n  subscribeToRepositories() {\n    this.repositories.forEach((repository) => {\n      if (repository instanceof Repository) {\n        this.subscribeToRepository(repository);\n      } else if (repository.repository instanceof Repository && typeof repository.callback === 'string') {\n        this.subscribeToRepository(repository.repository, this[repository.callback]);\n      } else {\n        throw 'unexpected format of producer repositories definition';\n      }\n    });\n  }\n\n\n  // **unsubscribeFromRepositories** <br/>\n  // Unsubscribes from all the repositories.\n  unsubscribeFromRepositories() {\n    this.repositories.forEach((repository) => {\n      if (repository instanceof Repository) {\n        this.unsubscribeFromRepository(repository);\n      } else if (repository.repository instanceof Repository && typeof repository.callback === 'string') {\n        this.unsubscribeFromRepository(repository.repository);\n      }\n    });\n  }\n\n\n  // **subscribeToRepository** <br/>\n  // @param [repository]: Object <br/>\n  // The repository to subscribe to. <br/>\n  // @param [callback]: String <br/>\n  // The method that should be executed on repository diff.\n  //\n  // Sets up a subscription to a repository with a custom or predefined callback.\n  subscribeToRepository(repository, callback) {\n    if (!callback) {\n      callback = diff => {\n        return this.onDiffInRepository(repository, diff);\n      };\n    }\n\n    this.listenTo(repository, Repository.prototype.REPOSITORY_DIFF, callback);\n  }\n\n\n  // **unsubscribeFromRepository** <br/>\n  // @param [repository]: Object <br/>\n  // The repository to unsubscribe from.\n  //\n  // Unsubscribes from a repository.\n  unsubscribeFromRepository(repository) {\n    this.stopListening(repository, Repository.prototype.REPOSITORY_DIFF);\n  }\n\n\n  // **subscribe** <br/>\n  // Called when a component is added.\n  subscribe() {\n    this.produceDataSync();\n  }\n\n\n  // **onDiffInRepository** <br/>\n  // Used as default callback when subscribing to a repository.\n  onDiffInRepository() {\n    this.produceData();\n  }\n\n\n  produceDataSync() {\n    this.produce(this.currentData());\n  }\n\n\n  // ***produce*** <br/>\n  // @param [data]: Object <br/>\n  // The current data.\n  //\n  // This method is called by the produceDataSync method <br/>\n  // and in turn calls methods for decoration of the current data <br/>\n  // and validation of its contract.\n  produce(data) {\n    data = this.decorate(data);\n    this._validateContract(data);\n    for (let componentId in this.registeredComponents) {\n      if (this.registeredComponents.hasOwnProperty(componentId)) {\n        const component = this.registeredComponents[componentId];\n        component.callback(data);\n      }\n    }\n  }\n\n\n  // **currentData** <br/>\n  // This is where the actual collection of the data is done. <br/>\n  // Default implementation is a noop.\n  currentData() {}\n\n  // **unsubscribe** <br/>\n  // Default implementation is a noop.\n  unsubscribe() {}\n\n\n  // **decorate** <br/>\n  // @param [data]: Object <br/>\n  // The data to decorate .<br/>\n  // @return data: Object <br/>\n  // The decorated data.\n  //\n  // Runs the assigned decorator(s) on the data.\n  decorate(data) {\n    for (let i = 0; i < this.decorators.length; i++) {\n      const decorator = this.decorators[i];\n      decorator(data);\n    }\n    return data;\n  }\n\n\n  modelToJSON(model) {\n    return model.toJSON();\n  }\n\n\n  modelsToJSON(models) {\n    return _.map(models, this.modelToJSON);\n  }\n\n\n  // **_validateContract** <br/>\n  // @param [dataToProduce]: Object <br/>\n  // The data to validate. <br/>\n  // @return : Boolean\n  //\n  // Used to validate data against a predefined contract, if there is one.\n  _validateContract(dataToProduce) {\n    const { key, contract } = this.PRODUCTION_KEY;\n    if (!contract) {\n      throw new Error(`The subscriptionKey ${key} doesn't have a contract specified`);\n    }\n\n    validateContract(contract, dataToProduce, this, 'producing');\n  }\n\n\n  extend(obj, mixin) {\n    for (let name in mixin) {\n      if (mixin.hasOwnProperty(name)) {\n        let method = mixin[name];\n        obj[name] = method;\n      }\n    }\n    return obj;\n  }\n\n\n  mixin(instance, mixin) {\n    return this.extend(instance, mixin);\n  }\n}\n\n_.extend(Producer.prototype, Events);\n\nexport default Producer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datacommunication/producers/Producer.js","import _ from 'underscore';\nimport {Collection} from 'backbone';\n//  ## Repository\n//\n// The Repository extends a [Backbone Collection](http://backbonejs.org/#Collection)\n// and adds functionality for diffing and throttling data\n//\n//\n\nclass Repository extends Collection {\n\n  get REPOSITORY_DIFF() {\n    return 'repository_diff';\n  }\n\n  get REPOSITORY_ADD() {\n    return 'repository_add';\n  }\n\n  get REPOSITORY_CHANGE() {\n    return 'repository_change';\n  }\n\n  get REPOSITORY_REMOVE() {\n    return 'repository_remove';\n  }\n  // Plain object holding reference to all the Backbone Collection models **added** since last throttled batch\n  constructor(...args) {\n    super(...args);\n    this._onAdd = this._onAdd.bind(this);\n    this._onChange = this._onChange.bind(this);\n    this._onRemove = this._onRemove.bind(this);\n    this._triggerUpdates = this._triggerUpdates.bind(this);\n  }\n\n\n  initialize() {\n    super.initialize(...arguments);\n    this.cid = this.cid || _.uniqueId('c');\n\n    this._throttledAddedModels = {};\n    // Plain object holding reference to all the Backbone Collection models **updated** since last throttled batch\n    this._throttledChangedModels = {};\n    // Plain object holding reference to all the Backbone Collection models **removed** since last throttled batch\n    this._throttledRemovedModels = {};\n\n    // Reference to a [throttled](http://underscorejs.org/#throttle) version of the _triggerUpdates\n    // function in order to avoid flooding the listeners\n    this._throttledTriggerUpdates = _.throttle(this._triggerUpdates, 100, {leading: false});\n\n    this.addThrottledListeners();\n  }\n\n  // **addThrottledListeners** <br/>\n  // Catch all events triggered from Backbone Collection in order to make throttling possible.\n  // It still bubbles the event for outside subscribers.\n  addThrottledListeners() {\n    this.on('all', this._onAll);\n  }\n\n  // **getByIds** <br/>\n  // @param [ids]: Array <br/>\n  // @return models: Array\n  getByIds(ids) {\n    const models = [];\n    for (let i = 0; i < ids.length; i++) {\n      let id = ids[i];\n      models.push(this.get(id));\n    }\n    return models;\n  }\n\n  isEmpty() {\n    return this.models.length <= 0;\n  }\n\n  // **_onAll** <br/>\n  // see *addThrottledListeners*\n  _onAll(event, model) {\n    switch (event) {\n      case 'add': this._onAdd(model); break;\n      case 'change': this._onChange(model); break;\n      case 'remove': this._onRemove(model); break;\n    }\n\n    this._throttledTriggerUpdates();\n  }\n\n  _onAdd(model) {\n    this._throttledAddedModels[model.id] = model;\n  }\n\n  _onChange(model) {\n    this._throttledChangedModels[model.id] = model;\n  }\n\n  _onRemove(model) {\n    this._throttledRemovedModels[model.id] = model;\n  }\n\n  _throttledAdd() {\n    const event = Repository.prototype.REPOSITORY_ADD;\n    const models = _.values(this._throttledAddedModels);\n    this._throttledAddedModels = {};\n    return this._throttledEvent(event, models, event);\n  }\n\n  _throttledChange() {\n    const event = Repository.prototype.REPOSITORY_CHANGE;\n    const models = _.values(this._throttledChangedModels);\n    this._throttledChangedModels = {};\n    return this._throttledEvent(event, models, event);\n  }\n\n  _throttledRemove() {\n    const event = Repository.prototype.REPOSITORY_REMOVE;\n    const models = _.values(this._throttledRemovedModels);\n    this._throttledRemovedModels = {};\n    return this._throttledEvent(event, models, event);\n  }\n\n  _throttledEvent(event, models, eventRef) {\n    if (models.length > 0) {\n      this.trigger(event, models, eventRef);\n    }\n    return models;\n  }\n\n\n  // **_throttledDiff** <br/>\n  // @param [added]: Array <br/>\n  // @param [changed]: Array <br/>\n  // @param [removed]: Array <br/>\n  //\n  // An event type called REPOSITORY_DIFF is added to the repository which supplies a consolidated\n  // response with all the added, removed and updated models since last throttled batch\n  _throttledDiff(added, changed, removed) {\n    const  event = Repository.prototype.REPOSITORY_DIFF;\n    if (added.length || changed.length || removed.length) {\n\n      added = _.difference(added, removed);\n      const consolidated = _.uniq(added.concat(changed));\n\n      const models = {\n        added,\n        changed,\n        removed,\n        consolidated\n      };\n\n      this.trigger(event, models, event);\n    }\n  }\n\n  _triggerUpdates() {\n    this._throttledDiff(\n      this._throttledAdd(),\n      this._throttledChange(),\n      this._throttledRemove()\n    );\n  }\n}\n\nexport default Repository;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datacommunication/repositories/Repository.js","import Repository from 'datacommunication/repositories/Repository';\n//  ## ServiceRepository\n//\n// A ServiceRepository extends the Repository class and enables\n// subscriptions for services\n//\n\nclass ServiceRepository extends Repository {\n\n  get services() {\n    return this._services || {};\n  }\n\n  set services(services) {\n    this._services = services;\n  }\n\n  // **addSubscriptionToService** <br/>\n  // @param [service]: Object <br/>\n  // The service to add the subscription to </br>\n  // @param [subscription]: Object <br/>\n  // The subscription to add to the service\n  //\n  // Adds a subscription to a service\n  addSubscriptionToService(service, subscription) {\n    service.addSubscription(subscription);\n  }\n\n  // **removeSubscriptionFromService** <br/>\n  // @param [service]: Object <br/>\n  // The service to remove the subscription from </br>\n  // @param [subscription]: Object <br/>\n  // The subscription to remove from the service\n  //\n  // Removes a subscription from a service\n  removeSubscriptionFromService(service, subscription) {\n    service.removeSubscription(subscription);\n  }\n\n  // **addSubscription** <br/>\n  // @param [type]: String <br/>\n  // Used to identify the service for this subscription.\n  // @param [subscription]: Object <br/>\n  // Used to configure the service request\n  //\n  // Maps the service through type before subscribing\n  addSubscription(type, subscription) {\n    if (this.services[type]) {\n      this.addSubscriptionToService(this.services[type], subscription);\n    }\n  }\n\n  // **removeSubscription** <br/>\n  // @param [type]: String <br/>\n  // Used to identify the service for this subscription.\n  // @param [subscription]: Object <br/>\n  // Used to configure the service request\n  //\n  // Maps the service through type before unsubscribing\n  removeSubscription(type, subscription) {\n    if (this.services[type]) {\n      this.removeSubscriptionFromService(this.services[type], subscription);\n    }\n  }\n}\n\n// Expose ServiceRepository on the Vigor object\nexport default ServiceRepository;\n\n\n// WEBPACK FOOTER //\n// ./src/datacommunication/repositories/ServiceRepository.js"],"sourceRoot":""}